var CodeMirror=function(){function e(a,u){function y(e){Jn.onDragEvent&&Jn.onDragEvent(er,b(e))||k(e)}function x(e){return e>=0&&Ti.size>e}function E(e){return f(Ti,e)}function N(e,t){Hi=!0;for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function I(e){var t={line:0,ch:0};Ct(t,{line:Ti.size-1,ch:E(Ti.size-1).text.length},lt(e),t,t),Ni=!0}function B(){var e=[];return Ti.iter(0,Ti.size,function(t){e.push(t.text)}),e.join("\n")}function z(){(Pi!=mi.scrollTop||Wi!=ri.scrollLeft)&&(Pi=mi.scrollTop,Wi=ri.scrollLeft,Xt([]),Jn.fixedGutter&&(si.style.left=ri.scrollLeft+"px"),Jn.onScroll&&Jn.onScroll(er))}function nt(e){function t(t){Z&&(ri.draggable=!1),Ei=!1,c(),u(),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(w(t),nn(o.line,o.ch,!0),Wt())}function n(e){var t=Pn(e,!0);if(t&&!M(t,l)){xi||bt(),l=t,Zt(o,t),Ni=!1;var i=Ut();(t.line>=i.to||t.line<i.from)&&(s=setTimeout(Kn(function(){n(e)}),150))}}function i(e){clearTimeout(s);var t=Pn(e);t&&Zt(o,t),w(e),Wt(),Ni=!0,d(),c()}Jt(_(e,"shiftKey"));for(var r=C(e);r!=ti;r=r.parentNode)if(r.parentNode==oi&&r!=ai)return;for(var r=C(e);r!=ti;r=r.parentNode)if(r.parentNode==li)return Jn.onGutterClick&&Jn.onGutterClick(er,O(li.childNodes,r)+qi,e),w(e);var o=Pn(e);switch(T(e)){case 3:return V&&!R&&Wn(e),void 0;case 2:return o&&nn(o.line,o.ch,!0),setTimeout(Wt,20),w(e),void 0}if(!o)return C(e)==ri&&w(e),void 0;xi||bt();var a=+new Date;if($i&&$i.time>a-400&&M($i.pos,o))return w(e),setTimeout(Wt,20),dn(o.line);if(Si&&Si.time>a-400&&M(Si.pos,o))return $i={time:a,pos:o},w(e),un(o);Si={time:a,pos:o};var s,l=o;if(Jn.dragDrop&&ot&&!Jn.readOnly&&!M(Oi.from,Oi.to)&&!L(o,Oi.from)&&!L(Oi.to,o)){Z&&(ri.draggable=!0);var c=S(document,"mouseup",Kn(t),!0),u=S(ri,"drop",Kn(t),!0);return Ei=!0,ri.dragDrop&&ri.dragDrop(),void 0}w(e),nn(o.line,o.ch,!0);var d=S(document,"mousemove",Kn(function(e){clearTimeout(s),w(e),Y||T(e)?n(e):i(e)}),!0),c=S(document,"mouseup",Kn(i),!0)}function st(e){for(var t=C(e);t!=ti;t=t.parentNode)if(t.parentNode==li)return w(e);var n=Pn(e);n&&($i={time:+new Date,pos:n},w(e),un(n))}function dt(e){function t(e,t){var i=new FileReader;i.onload=function(){o[t]=i.result,++a==r&&(n=on(n),Kn(function(){var e=jt(o.join(""),n,n);Zt(n,e)})())},i.readAsText(e)}if(!Jn.onDragEvent||!Jn.onDragEvent(er,b(e))){e.preventDefault();var n=Pn(e,!0),i=e.dataTransfer.files;if(n&&!Jn.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,s=0;r>s;++s)t(i[s],s);else{if(Ei&&!L(n,Oi.from)&&!L(Oi.to,n))return;try{var o=e.dataTransfer.getData("Text");o&&Qn(function(){var e=Oi.from,t=Oi.to;Zt(n,n),Ei&&jt("",e,t),Dt(o),Wt()})}catch(e){}}}}function ht(e){var t=Ht();if(e.dataTransfer.setData("Text",t),V||et||tt){var n=document.createElement("img");n.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=",e.dataTransfer.setDragImage(n,0,0)}}function ft(e,t){if("string"==typeof e&&(e=G[e],!e))return!1;var n=_i;try{Jn.readOnly&&(Bi=!0),t&&(_i=null),e(er)}catch(i){if(i!=X)throw i;return!1}finally{_i=n,Bi=!1}return!0}function pt(e){function r(){c=!0}var o=t(Jn.keyMap),a=o.auto;clearTimeout(Zi),a&&!i(e)&&(Zi=setTimeout(function(){t(Jn.keyMap)==o&&(Jn.keyMap=a.call?a.call(null,er):a)},50));var s=ut[_(e,"keyCode")],l=!1;if(null==s||e.altGraphKey)return!1;_(e,"altKey")&&(s="Alt-"+s),_(e,"ctrlKey")&&(s="Ctrl-"+s),_(e,"metaKey")&&(s="Cmd-"+s);var c=!1;return l=_(e,"shiftKey")?n("Shift-"+s,Jn.extraKeys,Jn.keyMap,function(e){return ft(e,!0)},r)||n(s,Jn.extraKeys,Jn.keyMap,function(e){return"string"==typeof e&&/^go[A-Z]/.test(e)?ft(e):void 0},r):n(s,Jn.extraKeys,Jn.keyMap,ft,r),c&&(l=!1),l&&(w(e),Rn(),Y&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),l}function mt(e,t){var i=n("'"+t+"'",Jn.extraKeys,Jn.keyMap,function(e){return ft(e,!0)});return i&&(w(e),Rn()),i}function gt(e){if(xi||bt(),Y&&27==e.keyCode&&(e.returnValue=!1),nr&&Ot()&&(nr=!1),!Jn.onKeyEvent||!Jn.onKeyEvent(er,b(e))){var t=_(e,"keyCode");Jt(16==t||_(e,"shiftKey"));var n=pt(e);tt&&(tr=n?t:null,!n&&88==t&&_(e,R?"metaKey":"ctrlKey")&&Dt(""))}}function vt(e){if(nr&&Ot(),!Jn.onKeyEvent||!Jn.onKeyEvent(er,b(e))){var t=_(e,"keyCode"),n=_(e,"charCode");if(tt&&t==tr)return tr=null,w(e),void 0;if(!(tt&&(!e.which||10>e.which)||it)||!pt(e)){var i=String.fromCharCode(null==n?t:n);Jn.electricChars&&bi.electricChars&&Jn.smartIndent&&!Jn.readOnly&&bi.electricChars.indexOf(i)>-1&&setTimeout(Kn(function(){fn(Oi.to.line,"smart")}),75),mt(e,i)||Ft()}}}function yt(e){Jn.onKeyEvent&&Jn.onKeyEvent(er,b(e))||16==_(e,"keyCode")&&(_i=null)}function bt(){"nocursor"!=Jn.readOnly&&(xi||(Jn.onFocus&&Jn.onFocus(er),xi=!0,-1==ri.className.search(/\bCodeMirror-focused\b/)&&(ri.className+=" CodeMirror-focused"),Li||Pt(!0)),It(),Rn())}function wt(){xi&&(Jn.onBlur&&Jn.onBlur(er),xi=!1,Fi&&Kn(function(){Fi&&(Fi(),Fi=null)})(),ri.className=ri.className.replace(" CodeMirror-focused","")),clearInterval(yi),setTimeout(function(){xi||(_i=null)},150)}function xt(e){return e>0&&1>e?1:e>-1&&0>e?-1:Math.round(e)}function kt(e){var t=0,n=0;if("DOMMouseScroll"==e.type){var i=8*-e.detail;e.axis==e.HORIZONTAL_AXIS?t=i:e.axis==e.VERTICAL_AXIS&&(n=i)}else void 0!==e.wheelDeltaX&&void 0!==e.wheelDeltaY?(t=e.wheelDeltaX/3,n=e.wheelDeltaY/3):void 0!==e.wheelDelta&&(n=e.wheelDelta/3);var r=!1;t=xt(t),n=xt(n),(t>0&&ri.scrollLeft>0||0>t&&ri.scrollLeft+ri.clientWidth<ri.scrollWidth)&&(ri.scrollLeft-=t,r=!0),(n>0&&mi.scrollTop>0||0>n&&mi.scrollTop+mi.clientHeight<mi.scrollHeight)&&(mi.scrollTop-=n,r=!0),r&&k(e)}function Ct(e,t,n,i,r){if(!Bi){if(Qi){var o=[];for(Ti.iter(e.line,t.line+1,function(e){o.push(e.text)}),Qi.addChange(e.line,n.length,o);Qi.done.length>Jn.undoDepth;)Qi.done.shift()}$t(e,t,n,i,r)}}function Tt(e,t){if(e.length){for(var n=e.pop(),i=[],r=n.length-1;r>=0;r-=1){var o=n[r],a=[],s=o.start+o.added;Ti.iter(o.start,s,function(e){a.push(e.text)}),i.push({start:o.start,added:o.old.length,old:a});var l={line:o.start+o.old.length-1,ch:F(a[a.length-1],o.old[o.old.length-1])};$t({line:o.start,ch:0},{line:s-1,ch:E(s-1).text.length},o.old,l,l)}Ni=!0,t.push(i)}}function _t(){Tt(Qi.done,Qi.undone)}function St(){Tt(Qi.undone,Qi.done)}function $t(e,t,n,i,r){function o(e){return Math.min(t.line,t.line+y)>=e?e:e+y}if(!Bi){var a=!1,s=Xi.length;Jn.lineWrapping||Ti.iter(e.line,t.line+1,function(e){return e.hidden||e.text.length!=s?void 0:(a=!0,!0)}),(e.line!=t.line||n.length>1)&&(Hi=!0);var l=t.line-e.line,u=E(e.line),d=E(t.line);if(0==e.ch&&0==t.ch&&""==n[n.length-1]){var h=[],f=null;e.line?(f=E(e.line-1),f.fixMarkEnds(d)):d.fixMarkStarts();for(var p=0,m=n.length-1;m>p;++p)h.push(c.inheritMarks(n[p],f));l&&Ti.remove(e.line,l,Ii),h.length&&Ti.insert(e.line,h)}else if(u==d)if(1==n.length)u.replace(e.ch,t.ch,n[0]);else{d=u.split(t.ch,n[n.length-1]),u.replace(e.ch,null,n[0]),u.fixMarkEnds(d);for(var h=[],p=1,m=n.length-1;m>p;++p)h.push(c.inheritMarks(n[p],u));h.push(d),Ti.insert(e.line+1,h)}else if(1==n.length)u.replace(e.ch,null,n[0]),d.replace(null,t.ch,""),u.append(d),Ti.remove(e.line+1,l,Ii);else{var h=[];u.replace(e.ch,null,n[0]),d.replace(null,t.ch,n[n.length-1]),u.fixMarkEnds(d);for(var p=1,m=n.length-1;m>p;++p)h.push(c.inheritMarks(n[p],u));l>1&&Ti.remove(e.line+1,l-1,Ii),Ti.insert(e.line+1,h)}if(Jn.lineWrapping){var g=Math.max(5,ri.clientWidth/In()-3);Ti.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/g)||1;t!=e.height&&N(e,t)}})}else Ti.iter(e.line,e.line+n.length,function(e){var t=e.text;!e.hidden&&t.length>s&&(Xi=t,s=t.length,Yi=!0,a=!1)}),a&&(Vi=!0);for(var v=[],y=n.length-l-1,p=0,b=wi.length;b>p;++p){var w=wi[p];e.line>w?v.push(w):w>t.line&&v.push(w+y)}var x=e.line+Math.min(n.length,500);Gn(e.line,x),v.push(x),wi=v,Xn(100),ji.push({from:e.line,to:t.line+1,diff:y});var k={from:e,to:t,text:n};if(Di){for(var C=Di;C.next;C=C.next);C.next=k}else Di=k;en(on(i),on(r),o(Oi.from.line),o(Oi.to.line))}}function Et(e){var t=Hn(),n=Math.floor(Ti.height*t+2*Fn()),i=ri.clientHeight;mi.style.height=i+"px",ri.clientHeight&&(gi.style.height=n+"px"),null!=e&&(mi.scrollTop=e),ai.style.top=zi*t-mi.scrollTop+"px",mi.style.display=n>i?"block":"none"}function Nt(){var e=document.createElement("div"),t=document.createElement("div");e.className="CodeMirror-scrollbar",e.style.cssText="position: absolute; left: -9999px; height: 100px;",t.className="CodeMirror-scrollbar-inner",t.style.height="200px",e.appendChild(t),document.body.appendChild(e);var n=1>=e.offsetWidth;return document.body.removeChild(e),n}function At(){var e=0;Xi="",Yi=!0,Ti.iter(0,Ti.size,function(t){var n=t.text;!t.hidden&&n.length>e&&(e=n.length,Xi=n)}),Vi=!1}function jt(e,t,n){function i(i){if(L(i,t))return i;if(!L(n,i))return r;var o=i.line+e.length-(n.line-t.line)-1,a=i.ch;return i.line==n.line&&(a+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0))),{line:o,ch:a}}t=on(t),n=n?on(n):t,e=lt(e);var r;return Mt(e,t,n,function(e){return r=e,{from:i(Oi.from),to:i(Oi.to)}}),r}function Dt(e,t){Mt(lt(e),Oi.from,Oi.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:Oi.from,to:Oi.from}:{from:Oi.from,to:e}})}function Mt(e,t,n,i){var r=1==e.length?e[0].length+t.ch:e[e.length-1].length,o=i({line:t.line+e.length-1,ch:r});Ct(t,n,e,o.from,o.to)}function Lt(e,t){var n=e.line,i=t.line;if(n==i)return E(n).text.slice(e.ch,t.ch);var r=[E(n).text.slice(e.ch)];return Ti.iter(n+1,i,function(e){r.push(e.text)}),r.push(E(i).text.slice(0,t.ch)),r.join("\n")}function Ht(){return Lt(Oi.from,Oi.to)}function It(){nr||ki.set(Jn.pollInterval,function(){Vn(),Ot(),xi&&It(),Yn()})}function Ft(){function e(){Vn();var n=Ot();n||t?(nr=!1,It()):(t=!0,ki.set(60,e)),Yn()}var t=!1;nr=!0,ki.set(20,e)}function Ot(){if(Li||!xi||ct(ii)||Jn.readOnly)return!1;var e=ii.value;if(e==ir)return!1;_i=null;for(var t=0,n=Math.min(ir.length,e.length);n>t&&ir[t]==e[t];)++t;return ir.length>t?Oi.from={line:Oi.from.line,ch:Oi.from.ch-(ir.length-t)}:Ri&&M(Oi.from,Oi.to)&&(Oi.to={line:Oi.to.line,ch:Math.min(E(Oi.to.line).text.length,Oi.to.ch+(e.length-t))}),Dt(e.slice(t),"end"),e.length>1e3?ii.value=ir="":ir=e,!0}function Pt(e){M(Oi.from,Oi.to)?e&&(ir=ii.value=""):(ir="",ii.value=Ht(),D(ii))}function Wt(){"nocursor"!=Jn.readOnly&&ii.focus()}function Rt(){if(di.getBoundingClientRect){var e=di.getBoundingClientRect();if(!Y||e.top!=e.bottom){var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>e.top||e.bottom>t)&&Bt()}}}function Bt(){var e=zt();return qt(e.x,e.y,e.x,e.yBot)}function zt(){var e=Dn(Oi.inverted?Oi.from:Oi.to),t=Jn.lineWrapping?Math.min(e.x,ci.offsetWidth):e.x;return{x:t,y:e.y,yBot:e.yBot}}function qt(e,t,n,i){var r=Gt(e,t,n,i),o=!1;null!=r.scrollLeft&&(ri.scrollLeft=r.scrollLeft,o=!0),null!=r.scrollTop&&(mi.scrollTop=r.scrollTop,o=!0),o&&Jn.onScroll&&Jn.onScroll(er)}function Gt(e,t,n,i){var r=On(),o=Fn();t+=o,i+=o,e+=r,n+=r;var a=ri.clientHeight,s=mi.scrollTop,l={},c=Fn()+10>t;s>t?l.scrollTop=c?0:Math.max(0,t):i>s+a&&(l.scrollTop=i-a);var u=ri.clientWidth,d=ri.scrollLeft,h=Jn.fixedGutter?si.clientWidth:0,f=h+r+10>e;return d+h>e||f?(f&&(e=0),l.scrollLeft=Math.max(0,e-10-h)):n>u+d-3&&(l.scrollLeft=n+10-u),l}function Ut(e){var t=Hn(),n=(null!=e?e:mi.scrollTop)-Fn(),i=Math.max(0,Math.floor(n/t)),r=Math.ceil((n+ri.clientHeight)/t);return{from:m(Ti,i),to:m(Ti,r)}}function Xt(e,t,n){function i(){var e=pi.firstChild,t=!1;return Ti.iter(qi,Gi,function(n){if(!n.hidden){var i=Math.round(e.offsetHeight/d)||1;n.height!=i&&(N(n,i),Hi=t=!0)}e=e.nextSibling}),t}if(!ri.clientWidth)return qi=Gi=zi=0,void 0;var r=Ut(n);if(e!==!0&&0==e.length&&r.from>qi&&Gi>r.to)return Et(n),void 0;var o=Math.max(r.from-100,0),a=Math.min(Ti.size,r.to+100);o>qi&&20>o-qi&&(o=qi),Gi>a&&20>Gi-a&&(a=Math.min(Ti.size,Gi));for(var s=e===!0?[]:Vt([{from:qi,to:Gi,domStart:0}],e),l=0,c=0;s.length>c;++c){var u=s[c];o>u.from&&(u.domStart+=o-u.from,u.from=o),u.to>a&&(u.to=a),u.from>=u.to?s.splice(c--,1):l+=u.to-u.from}if(l==a-o&&o==qi&&a==Gi)return Et(n),void 0;s.sort(function(e,t){return e.domStart-t.domStart});var d=Hn(),h=si.style.display;pi.style.display="none",Yt(o,a,s),pi.style.display=si.style.display="";var f=o!=qi||a!=Gi||Ui!=ri.clientHeight+d;if(f&&(Ui=ri.clientHeight+d),qi=o,Gi=a,zi=g(Ti,o),pi.childNodes.length!=Gi-qi)throw new Error("BAD PATCH! "+JSON.stringify(s)+" size="+(Gi-qi)+" nodes="+pi.childNodes.length);if(Jn.lineWrapping){var p=Math.floor(Ti.height*d+2*Fn()),m=ri.clientHeight;p>m&&(mi.style.display="block"),i()}return si.style.display=h,(f||Hi)&&Kt()&&Jn.lineWrapping&&i()&&Kt(),Qt(),Et(n),!t&&Jn.onUpdate&&Jn.onUpdate(er),!0}function Vt(e,t){for(var n=0,i=t.length||0;i>n;++n){for(var r=t[n],o=[],a=r.diff||0,s=0,l=e.length;l>s;++s){var c=e[s];r.to<=c.from&&r.diff?o.push({from:c.from+a,to:c.to+a,domStart:c.domStart}):r.to<=c.from||r.from>=c.to?o.push(c):(r.from>c.from&&o.push({from:c.from,to:r.from,domStart:c.domStart}),r.to<c.to&&o.push({from:r.to+a,to:c.to+a,domStart:c.domStart+(r.to-c.from)}))}e=o}return e}function Yt(e,t,n){function i(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var r=0,o=pi.firstChild,a=0;n.length>a;++a){for(var s=n[a];s.domStart>r;)o=i(o),r++;for(var l=0,c=s.to-s.from;c>l;++l)o=o.nextSibling,r++}for(;o;)o=i(o)}else pi.innerHTML="";var u=n.shift(),o=pi.firstChild,l=e,d=document.createElement("div");Ti.iter(e,t,function(e){if(u&&u.to==l&&(u=n.shift()),!u||u.from>l){if(e.hidden)var t=d.innerHTML="<pre></pre>";else{var t="<pre"+(e.className?' class="'+e.className+'"':"")+">"+e.getHTML(vn)+"</pre>";e.bgClassName&&(t='<div style="position: relative"><pre class="'+e.bgClassName+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+t+"</div>")}d.innerHTML=t,pi.insertBefore(d.firstChild,o)}else o=o.nextSibling;++l})}function Kt(){if(Jn.gutter||Jn.lineNumbers){var e=ai.offsetHeight,t=ri.clientHeight;si.style.height=(2>e-t?t:e)+"px";var n,i=[],r=qi;if(Ti.iter(qi,Math.max(Gi,qi+1),function(e){if(e.hidden)i.push("<pre></pre>");else{var t=e.gutterMarker,o=Jn.lineNumbers?r+Jn.firstLineNumber:null;t&&t.text?o=t.text.replace("%N%",null!=o?o:""):null==o&&(o=" "),i.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",o);for(var a=1;e.height>a;++a)i.push("<br/>&#160;");i.push("</pre>"),t||(n=r)}++r}),si.style.display="none",li.innerHTML=i.join(""),null!=n&&Jn.lineNumbers){for(var o=li.childNodes[n-qi],a=String(Ti.size).length,s=j(o.firstChild),l="";a>s.length+l.length;)l+=" ";l&&o.insertBefore(document.createTextNode(l),o.firstChild)}si.style.display="";var c=Math.abs((parseInt(ci.style.marginLeft)||0)-si.offsetWidth)>2;return ci.style.marginLeft=si.offsetWidth+"px",Hi=!1,c}}function Qt(){function e(e,t,n,i){var r=J?"width: "+(n?u-n-e:u)+"px":"right: "+n+"px";c+='<div class="CodeMirror-selected" style="position: absolute; left: '+e+"px; top: "+t+"px; "+r+"; height: "+i+'px"></div>'}var t=M(Oi.from,Oi.to),n=Dn(Oi.from,!0),i=t?n:Dn(Oi.to,!0),r=Oi.inverted?n:i,o=Hn(),a=A(ti),s=A(pi);if(ni.style.top=Math.max(0,Math.min(ri.offsetHeight,r.y+s.top-a.top))+"px",ni.style.left=Math.max(0,Math.min(ri.offsetWidth,r.x+s.left-a.left))+"px",t)di.style.top=r.y+"px",di.style.left=(Jn.lineWrapping?Math.min(r.x,ci.offsetWidth):r.x)+"px",di.style.display="",fi.style.display="none";else{var l=n.y==i.y,c="",u=ci.clientWidth||ci.offsetWidth,d=ci.clientHeight||ci.offsetHeight;if(Oi.from.ch&&n.y>=0){var h=l?u-i.x:0;e(n.x,n.y,h,o)}var f=Math.max(0,n.y+(Oi.from.ch?o:0)),p=Math.min(i.y,d)-f;p>.2*o&&e(0,f,0,p),l&&Oi.from.ch||!(d-.5*o>i.y)||e(0,i.y,u-i.x,o),fi.innerHTML=c,di.style.display="none",fi.style.display=""}}function Jt(e){_i=e?_i||(Oi.inverted?Oi.to:Oi.from):null}function Zt(e,t){var n=_i&&on(_i);n&&(L(n,e)?e=n:L(t,n)&&(t=n)),en(e,t),Ai=!0}function en(e,t,n,i){if(rr=null,null==n&&(n=Oi.from.line,i=Oi.to.line),!M(Oi.from,e)||!M(Oi.to,t)){if(L(t,e)){var r=t;t=e,e=r}if(e.line!=n){var o=tn(e,n,Oi.from.ch);o?e=o:En(e.line,!1)}if(t.line!=i&&(t=tn(t,i,Oi.to.ch)),M(e,t)?Oi.inverted=!1:M(e,Oi.to)?Oi.inverted=!1:M(t,Oi.from)&&(Oi.inverted=!0),Jn.autoClearEmptyLines&&M(Oi.from,Oi.to)){var a=Oi.inverted?e:t;if(a.line!=Oi.from.line&&Oi.from.line<Ti.size){var s=E(Oi.from.line);/^\s+$/.test(s.text)&&setTimeout(Kn(function(){if(s.parent&&/^\s+$/.test(s.text)){var e=p(s);jt("",{line:e,ch:0},{line:e,ch:s.text.length})}},10))}}Oi.from=e,Oi.to=t,Mi=!0}}function tn(e,t,n){function i(t){for(var i=e.line+t,r=1==t?Ti.size:-1;i!=r;){var a=E(i);if(!a.hidden){var s=e.ch;return(o||s>n||s>a.text.length)&&(s=a.text.length),{line:i,ch:s}}i+=t}}var r=E(e.line),o=e.ch==r.text.length&&e.ch!=n;return r.hidden?e.line>=t?i(1)||i(-1):i(-1)||i(1):e}function nn(e,t,n){var i=on({line:e,ch:t||0});(n?Zt:en)(i,i)}function rn(e){return Math.max(0,Math.min(e,Ti.size-1))}function on(e){if(0>e.line)return{line:0,ch:0};if(e.line>=Ti.size)return{line:Ti.size-1,ch:E(Ti.size-1).text.length};var t=e.ch,n=E(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:0>t?{line:e.line,ch:0}:e}function an(e,t){function n(){for(var t=o+e,n=0>e?-1:Ti.size;t!=n;t+=e){var i=E(t);if(!i.hidden)return o=t,s=i,!0}}function i(t){if(a==(0>e?0:s.text.length)){if(t||!n())return!1;a=0>e?s.text.length:0}else a+=e;return!0}var r=Oi.inverted?Oi.from:Oi.to,o=r.line,a=r.ch,s=E(o);if("char"==t)i();else if("column"==t)i(!0);else if("word"==t)for(var l=!1;!(0>e)||i();){if(P(s.text.charAt(a)))l=!0;else if(l){0>e&&(e=1,i());break}if(e>0&&!i())break}return{line:o,ch:a}}function sn(e,t){var n=0>e?Oi.from:Oi.to;(_i||M(Oi.from,Oi.to))&&(n=an(e,t)),nn(n.line,n.ch,!0)}function ln(e,t){M(Oi.from,Oi.to)?0>e?jt("",an(e,t),Oi.to):jt("",Oi.from,an(e,t)):jt("",Oi.from,Oi.to),Ai=!0}function cn(e,t){var n=0,i=Dn(Oi.inverted?Oi.from:Oi.to,!0);null!=rr&&(i.x=rr),"page"==t?n=Math.min(ri.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==t&&(n=Hn());var r=Mn(i.x,i.y+n*e+2);"page"==t&&(mi.scrollTop+=Dn(r,!0).y-i.y),nn(r.line,r.ch,!0),rr=i.x}function un(e){for(var t=E(e.line).text,n=e.ch,i=e.ch;n>0&&P(t.charAt(n-1));)--n;for(;t.length>i&&P(t.charAt(i));)++i;Zt({line:e.line,ch:n},{line:e.line,ch:i})}function dn(e){Zt({line:e,ch:0},on({line:e+1,ch:0}))}function hn(e){if(M(Oi.from,Oi.to))return fn(Oi.from.line,e);for(var t=Oi.to.line-(Oi.to.ch?0:1),n=Oi.from.line;t>=n;++n)fn(n,e)}function fn(e,t){if(t||(t="add"),"smart"==t)if(bi.indent)var n=qn(e);else t="prev";var i,r=E(e),o=r.indentation(Jn.tabSize),a=r.text.match(/^\s*/)[0];"smart"==t&&(i=bi.indent(n,r.text.slice(a.length),r.text),i==X&&(t="prev")),"prev"==t?i=e?E(e-1).indentation(Jn.tabSize):0:"add"==t?i=o+Jn.indentUnit:"subtract"==t&&(i=o-Jn.indentUnit),i=Math.max(0,i);var s=i-o;if(s){var l="",c=0;if(Jn.indentWithTabs)for(var u=Math.floor(i/Jn.tabSize);u;--u)c+=Jn.tabSize,l+="	";for(;i>c;)++c,l+=" "}else{if(Oi.from.line!=e&&Oi.to.line!=e)return;var l=a}jt(l,{line:e,ch:0},{line:e,ch:a.length})}function pn(){bi=e.getMode(Jn,Jn.mode),Ti.iter(0,Ti.size,function(e){e.stateAfter=null}),wi=[0],Xn()}function mn(){var e=Jn.gutter||Jn.lineNumbers;si.style.display=e?"":"none",e?Hi=!0:pi.parentNode.style.marginLeft=0}function gn(){if(Jn.lineWrapping){ti.className+=" CodeMirror-wrap";var e=ri.clientWidth/In()-3;Ti.iter(0,Ti.size,function(t){if(!t.hidden){var n=Math.ceil(t.text.length/e)||1;1!=n&&N(t,n)}}),ci.style.width=oi.style.width="",hi.style.left=""}else ti.className=ti.className.replace(" CodeMirror-wrap",""),Xi="",Yi=!0,Ti.iter(0,Ti.size,function(e){1==e.height||e.hidden||N(e,1),e.text.length>Xi.length&&(Xi=e.text)});ji.push({from:0,to:Ti.size})}function vn(e){var t=Jn.tabSize-e%Jn.tabSize,n=Ki[t];if(n)return n;for(var i='<span class="cm-tab">',r=0;t>r;++r)i+=" ";return Ki[t]={html:i+"</span>",width:t}}function yn(){ri.className=ri.className.replace(/\s*cm-s-\S+/g,"")+Jn.theme.replace(/(^|\s)\s*/g," cm-s-")}function bn(){var e=U[Jn.keyMap].style;ti.className=ti.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function wn(){this.set=[]}function xn(e,t,n){function i(e,t,n,i){E(e).addMark(new s(t,n,i,r))}e=on(e),t=on(t);var r=new wn;if(!L(e,t))return r;if(e.line==t.line)i(e.line,e.ch,t.ch,n);else{i(e.line,e.ch,null,n);for(var o=e.line+1,a=t.line;a>o;++o)i(o,null,null,n);i(t.line,null,t.ch,n)}return ji.push({from:e.line,to:t.line+1}),r}function kn(e){e=on(e);var t=new l(e.ch);return E(e.line).addMark(t),t}function Cn(e){e=on(e);var t=[],n=E(e.line).marked;if(!n)return t;for(var i=0,r=n.length;r>i;++i){var o=n[i];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker||o)}return t}function Tn(e,t,n){return"number"==typeof e&&(e=E(rn(e))),e.gutterMarker={text:t,style:n},Hi=!0,e}function _n(e){"number"==typeof e&&(e=E(rn(e))),e.gutterMarker=null,Hi=!0}function Sn(e,t){var n=e,i=e;return"number"==typeof e?i=E(rn(e)):n=p(e),null==n?null:t(i,n)?(ji.push({from:n,to:n+1}),i):null}function $n(e,t,n){return Sn(e,function(e){return e.className!=t||e.bgClassName!=n?(e.className=t,e.bgClassName=n,!0):void 0})}function En(e,t){return Sn(e,function(e,n){if(e.hidden!=t){if(e.hidden=t,!Jn.lineWrapping){var i=e.text;t&&i.length==Xi.length?Vi=!0:!t&&i.length>Xi.length&&(Xi=i,maxWidth=null,Vi=!1)}N(e,t?0:1);var r=Oi.from.line,o=Oi.to.line;if(t&&(r==n||o==n)){var a=r==n?tn({line:r,ch:0},r,0):Oi.from,s=o==n?tn({line:o,ch:0},o,0):Oi.to;if(!s)return;en(a,s)}return Hi=!0}})}function Nn(e){if("number"==typeof e){if(!x(e))return null;var t=e;if(e=E(e),!e)return null}else{var t=p(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className,bgClass:e.bgClassName}}function An(e){return ui.innerHTML="<pre><span>x</span></pre>",ui.firstChild.firstChild.firstChild.nodeValue=e,ui.firstChild.firstChild.offsetWidth||10}function jn(e,t){if(0==t)return{top:0,left:0};var n=Jn.lineWrapping&&e.text.length>t&&at.test(e.text.slice(t-1,t+1));ui.innerHTML="<pre>"+e.getHTML(vn,t,cr,n)+"</pre>";var i=document.getElementById(cr),r=i.offsetTop,o=i.offsetLeft;if(Y&&0==r&&0==o){var a=document.createElement("span");a.innerHTML="x",i.parentNode.insertBefore(a,i.nextSibling),r=a.offsetTop}return{top:r,left:o}}function Dn(e,t){var n,i=Hn(),r=i*(g(Ti,e.line)-(t?zi:0));if(0==e.ch)n=0;else{var o=jn(E(e.line),e.ch);n=o.left,Jn.lineWrapping&&(r+=Math.max(0,o.top))}return{x:n,y:r,yBot:r+i}}function Mn(e,t){function n(e){var t=jn(s,e);if(c){var n=Math.round(t.top/i);return Math.max(0,t.left+(n-u)*ri.clientWidth)}return t.left}0>t&&(t=0);var i=Hn(),r=In(),o=zi+Math.floor(t/i),a=m(Ti,o);if(a>=Ti.size)return{line:Ti.size-1,ch:E(Ti.size-1).text.length};var s=E(a),l=s.text,c=Jn.lineWrapping,u=c?o-g(Ti,a):0;if(0>=e&&0==u)return{line:a,ch:0};for(var d,h=0,f=0,p=l.length,v=Math.min(p,Math.ceil((e+.9*u*ri.clientWidth)/r));;){var y=n(v);if(!(e>=y&&p>v)){d=y,p=v;break}v=Math.min(p,Math.ceil(1.2*v))}if(e>d)return{line:a,ch:p};for(v=Math.floor(.8*p),y=n(v),e>y&&(h=v,f=y);;){if(1>=p-h)return{line:a,ch:d-e>e-f?h:p};var b=Math.ceil((h+p)/2),w=n(b);w>e?(p=b,d=w):(h=b,f=w)}}function Ln(e){var t=Dn(e,!0),n=A(ci);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function Hn(){if(null==sr){sr="<pre>";for(var e=0;49>e;++e)sr+="x<br/>";sr+="x</pre>"}var t=pi.clientHeight;return t==ar?or:(ar=t,ui.innerHTML=sr,or=ui.firstChild.offsetHeight/50||1,ui.innerHTML="",or)}function In(){return ri.clientWidth==ur?lr:(ur=ri.clientWidth,lr=An("x"))}function Fn(){return ci.offsetTop}function On(){return ci.offsetLeft}function Pn(e,t){var n,i,r=A(ri,!0);try{n=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(n-r.left>ri.clientWidth||i-r.top>ri.clientHeight))return null;var o=A(ci,!0);return Mn(n-o.left,i-o.top)}function Wn(e){function t(){var e=lt(ii.value).join("\n");e==o||Jn.readOnly||Kn(Dt)(e,"end"),ni.style.position="relative",ii.style.cssText=r,Q&&(mi.scrollTop=i),Li=!1,Pt(!0),It()}var n=Pn(e),i=mi.scrollTop;if(n&&!tt){(M(Oi.from,Oi.to)||L(n,Oi.from)||!L(n,Oi.to))&&Kn(nn)(n.line,n.ch);var r=ii.style.cssText;ni.style.position="absolute",ii.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Li=!0;var o=ii.value=Ht();if(Wt(),D(ii),V){k(e);var a=S(window,"mouseup",function(){a(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function Rn(){clearInterval(yi);var e=!0;di.style.visibility="",yi=setInterval(function(){di.style.visibility=(e=!e)?"":"hidden"},650)}function Bn(e){function t(e,t,n){if(e.text)for(var i,r=e.styles,o=a?0:e.text.length-1,l=a?0:r.length-2,c=a?r.length:-2;l!=c;l+=2*s){var u=r[l];if(r[l+1]==h){for(var d=a?0:u.length-1,m=a?u.length:-1;d!=m;d+=s,o+=s)if(o>=t&&n>o&&p.test(i=u.charAt(d))){var g=dr[i];if(">"==g.charAt(1)==a)f.push(i);else{if(f.pop()!=g.charAt(0))return{pos:o,match:!1};if(!f.length)return{pos:o,match:!0}}}}else o+=s*u.length}}var n=Oi.inverted?Oi.from:Oi.to,i=E(n.line),r=n.ch-1,o=r>=0&&dr[i.text.charAt(r)]||dr[i.text.charAt(++r)];if(o){for(var a=(o.charAt(0),">"==o.charAt(1)),s=a?1:-1,l=i.styles,c=r+1,u=0,d=l.length;d>u;u+=2)if(0>=(c-=l[u].length)){var h=l[u+1];break}for(var f=[i.text.charAt(r)],p=/[(){}[\]]/,u=n.line,d=a?Math.min(u+100,Ti.size):Math.max(-1,u-100);u!=d;u+=s){var i=E(u),m=u==n.line,g=t(i,m&&a?r+1:0,m&&!a?r:i.text.length);if(g)break}g||(g={pos:null,match:!1});var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",v=xn({line:n.line,ch:r},{line:n.line,ch:r+1},h),y=null!=g.pos&&xn({line:u,ch:g.pos},{line:u,ch:g.pos+1},h),b=Kn(function(){v.clear(),y&&y.clear()});e?setTimeout(b,800):Fi=b}}function zn(e){for(var t,n,i=e,r=e-40;i>r;--i){if(0==i)return 0;var o=E(i-1);if(o.stateAfter)return i;var a=o.indentation(Jn.tabSize);(null==n||t>a)&&(n=i-1,t=a)}return n}function qn(e){var t=zn(e),n=t&&E(t-1).stateAfter;return n=n?r(bi,n):o(bi),Ti.iter(t,e,function(e){e.highlight(bi,n,Jn.tabSize),e.stateAfter=r(bi,n)}),e>t&&ji.push({from:t,to:e}),Ti.size>e&&!E(e).stateAfter&&wi.push(e),n}function Gn(e,t){var n=qn(e);Ti.iter(e,t,function(e){e.highlight(bi,n,Jn.tabSize),e.stateAfter=r(bi,n)})}function Un(){for(var e=+new Date+Jn.workTime,t=wi.length;wi.length;){if(E(qi).stateAfter)var n=wi.pop();else var n=qi;if(!(n>=Ti.size)){var i=zn(n),a=i&&E(i-1).stateAfter;a=a?r(bi,a):o(bi);var s=0,l=bi.compareStates,c=!1,u=i,d=!1;if(Ti.iter(u,Ti.size,function(t){var i=t.stateAfter;if(+new Date>e)return wi.push(u),Xn(Jn.workDelay),c&&ji.push({from:n,to:u+1}),d=!0;var o=t.highlight(bi,a,Jn.tabSize);o&&(c=!0),t.stateAfter=r(bi,a);var h=null;if(l){var f=i&&l(i,a);f!=X&&(h=!!f)}return null==h&&(o===!1&&i?++s>3&&(!bi.indent||bi.indent(i,"")==bi.indent(a,""))&&(h=!0):s=0),h?!0:(++u,void 0)}),d)return;c&&ji.push({from:n,to:u+1})}}t&&Jn.onHighlightComplete&&Jn.onHighlightComplete(er)}function Xn(e){wi.length&&Ci.set(e,Kn(Un))}function Vn(){Ni=Ai=Di=null,ji=[],Mi=!1,Ii=[]}function Yn(){Vi&&At(),Yi&&!Jn.lineWrapping&&(hi.style.left=An(Xi)+"px",Yi=!1);var e,t;if(Mi){var n=zt();e=Gt(n.x,n.y,n.x,n.yBot)}ji.length?t=Xt(ji,!0,e?e.scrollTop:null):(Mi&&Qt(),Hi&&Kt()),e&&Bt(),Mi&&(Rt(),Rn()),xi&&!Li&&(Ni===!0||Ni!==!1&&Mi)&&Pt(Ai),Mi&&Jn.matchBrackets&&setTimeout(Kn(function(){Fi&&(Fi(),Fi=null),M(Oi.from,Oi.to)&&Bn(!1)}),20);var i=Mi,r=Ii;Di&&Jn.onChange&&er&&Jn.onChange(er,Di),i&&Jn.onCursorActivity&&Jn.onCursorActivity(er);for(var o=0;r.length>o;++o)r[o](er);t&&Jn.onUpdate&&Jn.onUpdate(er)}function Kn(e){return function(){hr++||Vn();try{var t=e.apply(this,arguments)}finally{--hr||Yn()}return t}}function Qn(e){Qi.startCompound();try{return e()}finally{Qi.endCompound()}}var Jn={},Zn=e.defaults;for(var ei in Zn)Zn.hasOwnProperty(ei)&&(Jn[ei]=(u&&u.hasOwnProperty(ei)?u:Zn)[ei]);var ti=document.createElement("div");ti.className="CodeMirror"+(Jn.lineWrapping?" CodeMirror-wrap":""),ti.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scrollbar"><div class="CodeMirror-scrollbar-inner"></div></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;"></div><pre class="CodeMirror-cursor">&#160;</pre><pre class="CodeMirror-cursor" style="visibility: hidden">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>',a.appendChild?a.appendChild(ti):a(ti);var ni=ti.firstChild,ii=ni.firstChild,ri=ti.lastChild,oi=ri.firstChild,ai=oi.firstChild,si=ai.firstChild,li=si.firstChild,ci=si.nextSibling.firstChild,ui=ci.firstChild,di=ui.nextSibling,hi=di.nextSibling,fi=hi.nextSibling,pi=fi.nextSibling,mi=ni.nextSibling,gi=mi.firstChild;yn(),bn(),W&&(ii.style.width="0px"),Z||(ri.draggable=!0),ci.style.outline="none",null!=Jn.tabindex&&(ii.tabIndex=Jn.tabindex),Jn.autofocus&&Wt(),Jn.gutter||Jn.lineNumbers||(si.style.display="none"),it&&(ni.style.height="1px",ni.style.position="absolute"),rt?mi.className+=Nt()?" cm-sb-overlap":" cm-sb-nonoverlap":K&&(mi.className+=" cm-sb-ie7");try{An("x")}catch(vi){throw vi.message.match(/runtime/i)&&(vi=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),vi}var yi,bi,wi,xi,ki=new $,Ci=new $,Ti=new h([new d([new c("")])]);pn();var _i,Si,$i,Ei,Ni,Ai,ji,Di,Mi,Li,Hi,Ii,Fi,Oi={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Pi=0,Wi=0,Ri=!1,Bi=!1,zi=0,qi=0,Gi=0,Ui=0,Xi="",Vi=!1,Yi=!0,Ki={};Kn(function(){I(Jn.value||""),Ni=!1})();var Qi=new v;S(ri,"mousedown",Kn(nt)),S(ri,"dblclick",Kn(st)),S(ci,"selectstart",w),V||S(ri,"contextmenu",Wn),S(ri,"scroll",z),S(mi,"scroll",z),S(mi,"mousedown",function(){setTimeout(Wt,0)}),S(ri,"mousewheel",kt),S(ri,"DOMMouseScroll",kt),S(window,"resize",function(){Xt(!0)}),S(ii,"keyup",Kn(yt)),S(ii,"input",Ft),S(ii,"keydown",Kn(gt)),S(ii,"keypress",Kn(vt)),S(ii,"focus",bt),S(ii,"blur",wt),Jn.dragDrop&&(S(ri,"dragstart",ht),S(ri,"dragenter",y),S(ri,"dragover",y),S(ri,"drop",Kn(dt))),S(ri,"paste",function(){Wt(),Ft()}),S(ii,"paste",Ft),S(ii,"cut",Kn(function(){Jn.readOnly||Dt("")})),it&&S(oi,"mouseup",function(){document.activeElement==ii&&ii.blur(),Wt()});var Ji;try{Ji=document.activeElement==ii}catch(vi){}Ji||Jn.autofocus?setTimeout(bt,20):wt();var Zi,er=ti.CodeMirror={getValue:B,setValue:Kn(I),getSelection:Ht,replaceSelection:Kn(Dt),focus:function(){window.focus(),Wt(),bt(),Ft()},setOption:function(e,t){var n=Jn[e];Jn[e]=t,"mode"==e||"indentUnit"==e?pn():"readOnly"==e&&"nocursor"==t?(wt(),ii.blur()):"readOnly"!=e||t?"theme"==e?yn():"lineWrapping"==e&&n!=t?Kn(gn)():"tabSize"==e?Xt(!0):"keyMap"==e&&bn():Pt(!0),("lineNumbers"==e||"gutter"==e||"firstLineNumber"==e||"theme"==e)&&(mn(),Xt(!0))},getOption:function(e){return Jn[e]},undo:Kn(_t),redo:Kn(St),indentLine:Kn(function(e,t){"string"!=typeof t&&(t=null==t?Jn.smartIndent?"smart":"prev":t?"add":"subtract"),x(e)&&fn(e,t)}),indentSelection:Kn(hn),historySize:function(){return{undo:Qi.done.length,redo:Qi.undone.length}},clearHistory:function(){Qi=new v},matchBrackets:Kn(function(){Bn(!0)}),getTokenAt:Kn(function(e){return e=on(e),E(e.line).getTokenAt(bi,qn(e.line),e.ch)}),getStateAfter:function(e){return e=rn(null==e?Ti.size-1:e),qn(e+1)},cursorCoords:function(e,t){return null==e&&(e=Oi.inverted),this.charCoords(e?Oi.from:Oi.to,t)},charCoords:function(e,t){return e=on(e),"local"==t?Dn(e,!1):"div"==t?Dn(e,!0):Ln(e)},coordsChar:function(e){var t=A(ci);return Mn(e.x-t.left,e.y-t.top)},markText:Kn(xn),setBookmark:kn,findMarksAt:Cn,setMarker:Kn(Tn),clearMarker:Kn(_n),setLineClass:Kn($n),hideLine:Kn(function(e){return En(e,!0)}),showLine:Kn(function(e){return En(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!x(e))return null;e=E(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:Nn,addWidget:function(e,t,n,i,r){e=Dn(on(e));var o=e.yBot,a=e.x;if(t.style.position="absolute",oi.appendChild(t),"over"==i)o=e.y;else if("near"==i){var s=Math.max(ri.offsetHeight,Ti.height*Hn()),l=Math.max(oi.clientWidth,ci.clientWidth)-On();e.yBot+t.offsetHeight>s&&e.y>t.offsetHeight&&(o=e.y-t.offsetHeight),a+t.offsetWidth>l&&(a=l-t.offsetWidth)}t.style.top=o+Fn()+"px",t.style.left=t.style.right="","right"==r?(a=oi.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(oi.clientWidth-t.offsetWidth)/2),t.style.left=a+On()+"px"),n&&qt(a,o,a+t.offsetWidth,o+t.offsetHeight)},lineCount:function(){return Ti.size},clipPos:on,getCursor:function(e){return null==e&&(e=Oi.inverted),H(e?Oi.from:Oi.to)},somethingSelected:function(){return!M(Oi.from,Oi.to)},setCursor:Kn(function(e,t,n){null==t&&"number"==typeof e.line?nn(e.line,e.ch,n):nn(e,t,n)}),setSelection:Kn(function(e,t,n){(n?Zt:en)(on(e),on(t||e))
}),getLine:function(e){return x(e)?E(e).text:void 0},getLineHandle:function(e){return x(e)?E(e):void 0},setLine:Kn(function(e,t){x(e)&&jt(t,{line:e,ch:0},{line:e,ch:E(e).text.length})}),removeLine:Kn(function(e){x(e)&&jt("",{line:e,ch:0},on({line:e+1,ch:0}))}),replaceRange:Kn(jt),getRange:function(e,t){return Lt(on(e),on(t))},triggerOnKeyDown:Kn(gt),execCommand:function(e){return G[e](er)},moveH:Kn(sn),deleteH:Kn(ln),moveV:Kn(cn),toggleOverwrite:function(){Ri?(Ri=!1,di.className=di.className.replace(" CodeMirror-overwrite","")):(Ri=!0,di.className+=" CodeMirror-overwrite")},posFromIndex:function(e){var t,n=0;return Ti.iter(0,Ti.size,function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,++n,void 0)}),on({line:n,ch:t})},indexFromPos:function(e){if(0>e.line||0>e.ch)return 0;var t=e.ch;return Ti.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){null!=e&&(ri.scrollLeft=e),null!=t&&(mi.scrollTop=t),Xt([])},getScrollInfo:function(){return{x:ri.scrollLeft,y:mi.scrollTop,height:mi.scrollHeight,width:ri.scrollWidth}},operation:function(e){return Kn(e)()},compoundChange:function(e){return Qn(e)},refresh:function(){Xt(!0),mi.scrollHeight>Pi&&(mi.scrollTop=Pi)},getInputField:function(){return ii},getWrapperElement:function(){return ti},getScrollerElement:function(){return ri},getGutterElement:function(){return si}},tr=null,nr=!1,ir="",rr=null;wn.prototype.clear=Kn(function(){for(var e=1/0,t=-1/0,n=0,i=this.set.length;i>n;++n){var r=this.set[n],o=r.marked;if(o&&r.parent){var a=p(r);e=Math.min(e,a),t=Math.max(t,a);for(var s=0;o.length>s;++s)o[s].marker==this&&o.splice(s--,1)}}1/0!=e&&ji.push({from:e,to:t+1})}),wn.prototype.find=function(){for(var e,t,n=0,i=this.set.length;i>n;++n)for(var r=this.set[n],o=r.marked,a=0;o.length>a;++a){var s=o[a];if(s.marker==this&&(null!=s.from||null!=s.to)){var l=p(r);null!=l&&(null!=s.from&&(e={line:l,ch:s.from}),null!=s.to&&(t={line:l,ch:s.to}))}}return{from:e,to:t}};var or,ar,sr,lr,cr="CodeMirror-temp-"+Math.floor(16777215*Math.random()).toString(16),ur=0,dr={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},hr=0;for(var fr in q)q.propertyIsEnumerable(fr)&&!er.propertyIsEnumerable(fr)&&(er[fr]=q[fr]);return er}function t(e){return"string"==typeof e?U[e]:e}function n(e,n,i,r,o){function a(n){n=t(n);var i=n[e];if(null!=i&&r(i))return!0;if(n.nofallthrough)return o&&o(),!0;var s=n.fallthrough;if(null==s)return!1;if("[object Array]"!=Object.prototype.toString.call(s))return a(s);for(var l=0,c=s.length;c>l;++l)if(a(s[l]))return!0;return!1}return n&&a(n)?!0:a(i)}function i(e){var t=ut[_(e,"keyCode")];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function r(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function o(e,t,n){return e.startState?e.startState(t,n):!0}function a(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function s(e,t,n,i){this.from=e,this.to=t,this.style=n,this.marker=i}function l(e){this.from=e,this.to=e,this.line=null}function c(e,t){this.styles=t||[e,null],this.text=e,this.height=1,this.marked=this.gutterMarker=this.className=this.bgClassName=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function u(e,t,n,i){for(var r=0,o=0,a=0;t>o;r+=2){var s=n[r],l=o+s.length;0==a?(l>e&&i.push(s.slice(e-o,Math.min(s.length,t-o)),n[r+1]),l>=e&&(a=1)):1==a&&(l>t?i.push(s.slice(0,t-o),n[r+1]):i.push(s,n[r+1])),o=l}}function d(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;n>t;++t)e[t].parent=this,i+=e[t].height;this.height=i}function h(e){this.children=e;for(var t=0,n=0,i=0,r=e.length;r>i;++i){var o=e[i];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function f(e,t){for(;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(r>t){e=i;break}t-=r}return e.lines[t]}function p(e){if(null==e.parent)return null;for(var t=e.parent,n=O(t.lines,e),i=t.parent;i;t=i,i=i.parent){var r=0;for(i.children.length;i.children[r]!=t;++r)n+=i.children[r].chunkSize()}return n}function m(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var o=e.children[i],a=o.height;if(a>t){e=o;continue e}t-=a,n+=o.chunkSize()}return n}while(!e.lines);for(var i=0,r=e.lines.length;r>i;++i){var s=e.lines[i],l=s.height;if(l>t)break;t-=l}return n+i}function g(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var o=e.children[i],a=o.chunkSize();if(a>t){e=o;continue e}t-=a,n+=o.height}return n}while(!e.lines);for(var i=0;t>i;++i)n+=e.lines[i].height;return n}function v(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function y(){k(this)}function b(e){return e.stop||(e.stop=y),e}function w(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function x(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function k(e){w(e),x(e)}function C(e){return e.target||e.srcElement}function T(e){return e.which?e.which:1&e.button?1:2&e.button?3:4&e.button?2:void 0}function _(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function S(e,t,n,i){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),i)return function(){e.removeEventListener(t,n,!1)}}else{var r=function(e){n(e||window.event)};if(e.attachEvent("on"+t,r),i)return function(){e.detachEvent("on"+t,r)}}}function $(){this.id=null}function E(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var i=0,r=0;t>i;++i)"	"==e.charAt(i)?r+=n-r%n:++r;return r}function N(e){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)}function A(e,t){for(var n=e.ownerDocument.body,i=0,r=0,o=!1,a=e;a;a=a.offsetParent){var s=a.offsetLeft,l=a.offsetTop;a==n?(i+=Math.abs(s),r+=Math.abs(l)):(i+=s,r+=l),t&&"fixed"==N(a).position&&(o=!0)}for(var c=t&&!o?null:n,a=e.parentNode;a!=c;a=a.parentNode)null!=a.scrollLeft&&(i-=a.scrollLeft,r-=a.scrollTop);return{left:i,top:r}}function j(e){return e.textContent||e.innerText||e.nodeValue||""}function D(e){W?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function M(e,t){return e.line==t.line&&e.ch==t.ch}function L(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function H(e){return{line:e.line,ch:e.ch}}function I(e){return st.textContent=e,st.innerHTML}function F(e,t){if(!t)return 0;if(!e)return t.length;for(var n=e.length,i=t.length;n>=0&&i>=0&&e.charAt(n)==t.charAt(i);--n,--i);return i+1}function O(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function P(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null};var W=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),R=W||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var B=e.modes={},z=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var i=2;arguments.length>i;++i)n.dependencies.push(arguments[i])}B[t]=n},e.defineMIME=function(e,t){z[e]=t},e.resolveMode=function(t){if("string"==typeof t&&z.hasOwnProperty(t))t=z[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),i=B[n.name];return i?i(t,n):e.getMode(t,"text/plain")},e.listModes=function(){var e=[];for(var t in B)B.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in z)z.propertyIsEnumerable(t)&&e.push({mime:t,mode:z[t]});return e};var q=e.extensions={};e.defineExtension=function(e,t){q[e]=t};var G=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!M(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),i=Math.max(0,n.search(/\S/));e.setCursor(t.line,i>=t.ch&&t.ch?0:i,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},U=e.keyMap={};U.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},U.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},U.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},U["default"]=R?U.macDefault:U.pcDefault,U.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.fromTextArea=function(t,n){function i(){t.value=s.getValue()}function r(){i(),t.form.submit=a,t.form.submit(),t.form.submit=r}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),null==n.autofocus&&null!=t.getAttribute("autofocus")&&(n.autofocus=!0),t.form){var o=S(t.form,"submit",i,!0);if("function"==typeof t.form.submit){var a=t.form.submit;t.form.submit=r}}t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return s.save=i,s.getTextArea=function(){return t},s.toTextArea=function(){i(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(o(),"function"==typeof t.form.submit&&(t.form.submit=a))},s},e.copyState=r,e.startState=o,a.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return E(this.string,this.start,this.tabSize)},indentation:function(){return E(this.string,null,this.tabSize)},match:function(e,t,n){function i(e){return n?e.toLowerCase():e}if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&t!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=a,s.prototype={attach:function(e){this.marker.set.push(e)},detach:function(e){var t=O(this.marker.set,e);t>-1&&this.marker.set.splice(t,1)},split:function(e,t){if(e>=this.to&&null!=this.to)return null;var n=e>this.from||null==this.from?null:this.from-e+t,i=null==this.to?null:this.to-e+t;return new s(n,i,this.style,this.marker)},dup:function(){return new s(null,null,this.style,this.marker)},clipTo:function(e,t,n,i,r){e&&i>this.from&&(this.to>i||null==this.to)?this.from=null:null!=this.from&&this.from>=t&&(this.from=Math.max(i,this.from)+r),n&&(this.to>t||null==this.to)&&(t>this.from||null==this.from)?this.to=null:null!=this.to&&this.to>t&&(this.to=this.to>i?this.to+r:t)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(e){return this.marker==e.marker}},l.prototype={attach:function(e){this.line=e},detach:function(e){this.line==e&&(this.line=null)},split:function(e,t){return this.from>e?(this.from=this.to=this.from-e+t,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,i,r){(e||this.from>t)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(i,this.from)+r)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:p(this.line),ch:this.from}:null},clear:function(){if(this.line){var e=O(this.line.marked,this);-1!=e&&this.line.marked.splice(e,1),this.line=null}}},c.inheritMarks=function(e,t){var n=new c(e),i=t&&t.marked;if(i)for(var r=0;i.length>r;++r)if(null==i[r].to&&i[r].style){var o=n.marked||(n.marked=[]),a=i[r],s=a.dup();o.push(s),s.attach(n)}return n},c.prototype={replace:function(e,t,n){var i=[],r=this.marked,o=null==t?this.text.length:t;if(u(0,e,this.styles,i),n&&i.push(n,null),u(o,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,e)+n+this.text.slice(o),this.stateAfter=null,r)for(var a=n.length-(o-e),s=0;r.length>s;++s){var l=r[s];l.clipTo(null==e,e||0,null==t,o,a),l.isDead()&&(l.detach(this),r.splice(s--,1))}},split:function(e,t){var n=[t,null],i=this.marked;u(e,this.text.length,this.styles,n);var r=new c(t+this.text.slice(e),n);if(i)for(var o=0;i.length>o;++o){var a=i[o],s=a.split(e,t.length);s&&(r.marked||(r.marked=[]),r.marked.push(s),s.attach(r),s==a&&i.splice(o--,1))}return r},append:function(e){var t=this.text.length,n=e.marked,i=this.marked;if(this.text+=e.text,u(0,e.text.length,e.styles,this.styles),i)for(var r=0;i.length>r;++r)null==i[r].to&&(i[r].to=t);if(n&&n.length){i||(this.marked=i=[]);e:for(var r=0;n.length>r;++r){var o=n[r];if(!o.from)for(var a=0;i.length>a;++a){var s=i[a];if(s.to==t&&s.sameSet(o)){s.to=null==o.to?null:o.to+t,s.isDead()&&(s.detach(this),n.splice(r--,1));continue e}}i.push(o),o.attach(this),o.from+=t,null!=o.to&&(o.to+=t)}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(t)for(var i=0;t.length>i;++i){var r=t[i],o=null==r.to;if(o&&n)for(var a=0;n.length>a;++a)if(n[a].sameSet(r)){o=!1;break}o&&(r.to=this.text.length)}},fixMarkStarts:function(){var e=this.marked;if(e)for(var t=0;e.length>t;++t)null==e[t].from&&(e[t].from=0)},addMark:function(e){e.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(e),this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var i,r=new a(this.text,n),o=this.styles,s=0,l=!1,c=o[0];for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol();){var u=e.token(r,t),d=this.text.slice(r.start,r.pos);if(r.start=r.pos,s&&o[s-1]==u?o[s-2]+=d:d&&(!l&&(o[s+1]!=u||s&&o[s-2]!=i)&&(l=!0),o[s++]=d,o[s++]=u,i=c,c=o[s]),r.pos>5e3){o[s++]=this.text.slice(r.pos),o[s++]=null;break}}return o.length!=s&&(o.length=s,l=!0),s&&o[s-2]!=i&&(l=!0),l||(5>o.length&&10>this.text.length?null:!1)},getTokenAt:function(e,t,n){for(var i=this.text,r=new a(i);n>r.pos&&!r.eol();){r.start=r.pos;var o=e.token(r,t)}return{start:r.start,end:r.pos,string:r.current(),className:o||null,state:t}},indentation:function(e){return E(this.text,null,e)},getHTML:function(e,t,n,i){function r(t,n){if(t){if(l&&Y&&" "==t.charAt(0)&&(t=" "+t.slice(1)),l=!1,-1==t.indexOf("	")){c+=t.length;var i=I(t)}else for(var i="",r=0;;){var o=t.indexOf("	",r);if(-1==o){i+=I(t.slice(r)),c+=t.length-r;break}c+=o-r;var a=e(c);i+=I(t.slice(r,o))+a.html,c+=a.width,r=o+1}n?s.push('<span class="',n,'">',i,"</span>"):s.push(i)}}function o(e){return e?"cm-"+e.replace(/ +/g," cm-"):null}function a(){for(var e;m.length>C&&((e=m[C]).from==y||null==e.from);)null!=e.style&&k.push(e),++C;x=m.length>C?m[C].from:1/0;for(var t=0;k.length>t;++t){var n=k[t].to||1/0;n==y?k.splice(t--,1):x=Math.min(n,x)}}var s=[],l=!0,c=0,u=r;if(null!=t){var d=0,h='<span id="'+n+'">';u=function(e,n){var o=e.length;if(t>=d&&d+o>t){t>d&&(r(e.slice(0,t-d),n),i&&s.push("<wbr>")),s.push(h);var a=t-d;r(tt?e.slice(a,a+1):e.slice(a),n),s.push("</span>"),tt&&r(e.slice(a+1),n),t--,d+=o}else d+=o,r(e,n),d==t&&d==g?s.push(h+" </span>"):d>t+10&&/\s/.test(e)&&(u=function(){})}}var f=this.styles,p=this.text,m=this.marked,g=p.length;if(p||null!=t)if(m&&m.length)for(var v,y=0,b=0,w="",x=m[0].from||0,k=[],C=0;g>y;){x==y&&a();for(var T=Math.min(g,x);;){if(w){for(var _=y+w.length,S=v,$=0;k.length>$;++$)S=(S?S+" ":"")+k[$].style;if(u(_>T?w.slice(0,T-y):w,S),_>=T){w=w.slice(T-y),y=T;break}y=_}w=f[b++],v=o(f[b++])}}else for(var b=0,E=0;g>E;b+=2){var N=f[b],v=f[b+1],A=N.length;E+A>g&&(N=N.slice(0,g-E)),E+=A,u(N,o(v))}else u(" ");return s.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var e=0,t=this.marked.length;t>e;++e)this.marked[e].detach(this)}},d.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var i=e,r=e+t;r>i;++i){var o=this.lines[i];if(this.height-=o.height,o.cleanUp(),o.handlers)for(var a=0;o.handlers.length>a;++a)n.push(o.handlers[a])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0,r=t.length;r>i;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var i=0;this.children.length>i;++i){var r=this.children[i],o=r.chunkSize();if(o>e){var a=Math.min(t,o-e),s=r.height;if(r.remove(e,a,n),this.height-=s-r.height,o==a&&(this.children.splice(i--,1),r.parent=null),0==(t-=a))break;e=0}else e-=o}if(25>this.size-t){var l=[];this.collapse(l),this.children=[new d(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,i=0,r=t.length;r>i;++i)n+=t[i].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],a=o.chunkSize();if(a>=e){if(o.insertHeight(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var s=o.lines.splice(o.lines.length-25,25),l=new d(s);o.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new h(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=O(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new h(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],a=o.chunkSize();if(a>e){var s=Math.min(t,a-e);if(o.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}},v.prototype={addChange:function(e,t,n){this.undone.length=0;var i=+new Date,r=this.done[this.done.length-1],o=r&&r[r.length-1],a=i-this.time;if(this.compound&&r&&!this.closed)r.push({start:e,added:t,old:n});else if(a>400||!o||this.closed||o.start>e+n.length||e>o.start+o.added)this.done.push([{start:e,added:t,old:n}]),this.closed=!1;else{for(var s=Math.max(0,o.start-e),l=Math.max(0,e+n.length-(o.start+o.added)),c=s;c>0;--c)o.old.unshift(n[c-1]);for(var c=l;c>0;--c)o.old.push(n[n.length-c]);s&&(o.start=e),o.added+=t-(n.length-s-l)}this.time=i},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},e.e_stop=k,e.e_preventDefault=w,e.e_stopPropagation=x,e.connect=S,$.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var X=e.Pass={toString:function(){return"CodeMirror.Pass"}},V=/gecko\/\d{7}/i.test(navigator.userAgent),Y=/MSIE \d/.test(navigator.userAgent),K=/MSIE [1-7]\b/.test(navigator.userAgent),Q=/MSIE [1-8]\b/.test(navigator.userAgent),J=Y&&5==document.documentMode,Z=/WebKit\//.test(navigator.userAgent),et=/Chrome\//.test(navigator.userAgent),tt=/Opera\//.test(navigator.userAgent),nt=/Apple Computer/.test(navigator.vendor),it=/KHTML\//.test(navigator.userAgent),rt=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent),ot=function(){if(Q)return!1;var e=document.createElement("div");return"draggable"in e||"dragDrop"in e}();(function(){var e=document.createElement("textarea");return e.value="foo\nbar",e.value.indexOf("\r")>-1?"\r\n":"\n"})();var at=/^$/;V?at=/$'/:nt?at=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:et&&(at=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/),null!=document.documentElement.getBoundingClientRect&&(A=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var st=document.createElement("pre");"\na"==I("a")?I=function(e){return st.textContent=e,st.innerHTML.slice(1)}:"	"!=I("	")&&(I=function(e){return st.innerHTML="",st.appendChild(document.createTextNode(e)),st.innerHTML}),e.htmlEscape=I;var lt=3!="\n\nb".split(/\n/).length?function(e){for(var t,n=0,i=[];(t=e.indexOf("\n",n))>-1;)i.push(e.slice(n,"\r"==e.charAt(t-1)?t-1:t)),n=t+1;return i.push(e.slice(n)),i}:function(e){return e.split(/\r?\n/)};e.splitLines=lt;var ct=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var ut={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=ut,function(){for(var e=0;10>e;e++)ut[e+48]=String(e);for(var e=65;90>=e;e++)ut[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)ut[e+111]=ut[e+63235]="F"+e}(),e}();CodeMirror.defineMode("css",function(e){function t(e,t){return a=t,e}function n(e,n){var a=e.next();return"@"==a?(e.eatWhile(/[\w\\\-]/),t("meta",e.current())):"/"==a&&e.eat("*")?(n.tokenize=i,i(e,n)):"<"==a&&e.eat("!")?(n.tokenize=r,r(e,n)):"="!=a?"~"!=a&&"|"!=a||!e.eat("=")?'"'==a||"'"==a?(n.tokenize=o(a),n.tokenize(e,n)):"#"==a?(e.eatWhile(/[\w\\\-]/),t("atom","hash")):"!"==a?(e.match(/^\s*\w*/),t("keyword","important")):/\d/.test(a)?(e.eatWhile(/[\w.%]/),t("number","unit")):/[,.+>*\/]/.test(a)?t(null,"select-op"):/[;{}:\[\]]/.test(a)?t(null,a):(e.eatWhile(/[\w\\\-]/),t("variable","variable")):t(null,"compare"):(t(null,"compare"),void 0)}function i(e,i){for(var r,o=!1;null!=(r=e.next());){if(o&&"/"==r){i.tokenize=n;break}o="*"==r}return t("comment","comment")}function r(e,i){for(var r,o=0;null!=(r=e.next());){if(o>=2&&">"==r){i.tokenize=n;break}o="-"==r?o+1:0}return t("comment","comment")}function o(e){return function(i,r){for(var o,a=!1;null!=(o=i.next())&&(o!=e||a);)a=!a&&"\\"==o;return a||(r.tokenize=n),t("string","string")}}var a,s=e.indentUnit;return{startState:function(e){return{tokenize:n,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t),i=t.stack[t.stack.length-1];return"hash"==a&&"rule"!=i?n="string-2":"variable"==n&&("rule"==i?n="number":i&&"@media{"!=i||(n="tag")),"rule"==i&&/^[\{\};]$/.test(a)&&t.stack.pop(),"{"==a?"@media"==i?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==a?t.stack.pop():"@media"==a?t.stack.push("@media"):"{"==i&&"comment"!=a&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*s},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),CodeMirror.defineMode("ruby",function(e){function t(e){for(var t={},n=0,i=e.length;i>n;++n)t[e[n]]=!0;return t}function n(e,t,n){return n.tokenize.push(e),e(t,n)}function i(e,t){if(l=null,e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(s),"comment";if(e.eatSpace())return null;var i,r=e.next();if("`"==r||"'"==r||'"'==r||"/"==r&&!e.eol()&&" "!=e.peek())return n(o(r,"string",'"'==r||"`"==r),e,t);if("%"==r){var c,u=!1;e.eat("s")?c="atom":e.eat(/[WQ]/)?(c="string",u=!0):e.eat(/[wxqr]/)&&(c="string");var d=e.eat(/[^\w\s]/);return d?(h.propertyIsEnumerable(d)&&(d=h[d]),n(o(d,c,u,!0),e,t)):"operator"}if("#"==r)return e.skipToEnd(),"comment";if("<"==r&&(i=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return n(a(i[1]),e,t);if("0"==r)return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(r))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==r){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}return":"==r?e.eat("'")?n(o("'","atom",!1),e,t):e.eat('"')?n(o('"',"atom",!0),e,t):(e.eatWhile(/[\w\?]/),"atom"):"@"==r?(e.eat("@"),e.eatWhile(/[\w\?]/),"variable-2"):"$"==r?(e.next(),e.eatWhile(/[\w\?]/),"variable-3"):/\w/.test(r)?(e.eatWhile(/[\w\?]/),e.eat(":")?"atom":"ident"):"|"!=r||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok?/[\(\)\[\]{}\\;]/.test(r)?(l=r,null):"-"==r&&e.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(r)?(e.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(l="|",null)}function r(){var e=1;return function(t,n){if("}"==t.peek()){if(e--,0==e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else"{"==t.peek()&&e++;return i(t,n)}}function o(e,t,n,i){return function(o,a){for(var s,l=!1;null!=(s=o.next());){if(s==e&&(i||!l)){a.tokenize.pop();break}if(n&&"#"==s&&!l&&o.eat("{")){a.tokenize.push(r(arguments.callee));break}l=!l&&"\\"==s}return t}}function a(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function s(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var l,c=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload"]),u=t(["def","class","case","for","while","do","module","then","catch","loop","proc","begin"]),d=t(["end","until"]),h={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[i],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var n,i=t.tokenize[t.tokenize.length-1](e,t);if("ident"==i){var r=e.current();i=c.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(r)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable",u.propertyIsEnumerable(r)?n="indent":d.propertyIsEnumerable(r)?n="dedent":"if"!=r&&"unless"!=r||e.column()!=e.indentation()||(n="indent")}return(l||i&&"comment"!=i)&&(t.lastTok=r||l||i),"|"==l&&(t.varList=!t.varList),"indent"==n||/[\(\[\{]/.test(l)?t.context={prev:t.context,type:l||i,indented:t.indented}:("dedent"==n||/[\)\]\}]/.test(l))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==l||"operator"==i),i},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=i)return 0;var r=n&&n.charAt(0),o=t.context,a=o.type==h[r]||"keyword"==o.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return o.indented+(a?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricChars:"}de"}}),CodeMirror.defineMIME("text/x-ruby","ruby");