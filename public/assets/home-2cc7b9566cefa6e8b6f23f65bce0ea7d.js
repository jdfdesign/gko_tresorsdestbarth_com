!function(t){function e(){var e,i,n={height:l.innerHeight,width:l.innerWidth};return n.height||(e=s.compatMode,(e||!t.support.boxModel)&&(i="CSS1Compat"===e?c:s.body,n={height:i.clientHeight,width:i.clientWidth})),n}function i(){return{top:l.pageYOffset||c.scrollTop||s.body.scrollTop,left:l.pageXOffset||c.scrollLeft||s.body.scrollLeft}}function n(){var n,s=t(),l=0;if(t.each(r,function(t,e){var i=e.data.selector,n=e.$element;s=s.add(i?n.find(i):n)}),n=s.length)for(a=a||e(),o=o||i();n>l;l++)if(t.contains(c,s[l])){var h,u,d,p=t(s[l]),f={height:p.height(),width:p.width()},g=p.offset(),m=p.data("inview");if(!o||!a)return;g.top+f.height>o.top&&g.top<o.top+a.height&&g.left+f.width>o.left&&g.left<o.left+a.width?(h=o.left>g.left?"right":o.left+a.width<g.left+f.width?"left":"both",u=o.top>g.top?"bottom":o.top+a.height<g.top+f.height?"top":"both",d=h+"-"+u,m&&m===d||p.data("inview",d).trigger("inview",[!0,h,u])):m&&p.data("inview",!1).trigger("inview",[!1])}}var a,o,r={},s=document,l=window,c=s.documentElement,h=t.expando;t.event.special.inview={add:function(e){r[e.guid+"-"+this[h]]={data:e,$element:t(this)}},remove:function(t){try{delete r[t.guid+"-"+this[h]]}catch(e){}}},t(l).bind("scroll resize",function(){a=o=null}),!c.addEventListener&&c.attachEvent&&c.attachEvent("onfocusin",function(){o=null}),setInterval(n,250)}(jQuery);var $sidescroll=function(){var t=$(".parallax-item.category"),e=$(window),i={},n=!1,a=function(){o(),l(),s()},o=function(){r(),$(".inview").each(function(){$(this).find("div.ss-left").css({left:"0%"}).end().find("div.ss-right").css({right:"0%"})})},r=function(){i.width=e.width(),i.height=e.height()},s=function(){t.bind("inview",function(t,e){var i=$(this);e?i.addClass("inview"):i.removeClass("inview")}),$(window).on({debouncedresize:function(){o()}}),$(window).on({"scroll.Scrolling":function(){return n?!1:(n=!0,setTimeout(function(){l(),n=!1},10),void 0)}})},l=function(){var t=e.scrollTop(),n=i.height/2+t;$(".inview").each(function(){var e=$(this),a=e.find("div.ss-left"),o=e.find("div.ss-right"),r=e.offset().top;if(e.find(".headline:first"),r>i.height+t)a.css({left:"-50%"}),o.css({right:"-50%"});else{var s=e.height()-300,l=(r+s/2-n)/(i.height/2+s/2),c=Math.max(50*l,0);a.css({left:-c+"%"}),o.css({right:-c+"%"})}})};return{init:a}}();/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
!function(t){function e(e){var i=e||window.event,n=[].slice.call(arguments,1),a=0,o=0,r=0;return e=t.event.fix(i),e.type="mousewheel",i.wheelDelta&&(a=i.wheelDelta/120),i.detail&&(a=-i.detail/3),r=a,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(r=0,o=-1*a),void 0!==i.wheelDeltaY&&(r=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(o=-1*i.wheelDeltaX/120),n.unshift(e,a,o,r),(t.event.dispatch||t.event.handle).apply(this,n)}var i=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var n=i.length;n;)t.event.fixHooks[i[--n]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),/*
 * debouncedresize: special jQuery event that happens once after a window resize
 *
 * latest version and complete README available on Github:
 * https://github.com/louisremi/jquery-smartresize
 *
 * Copyright 2012 @louis_remi
 * Licensed under the MIT license.
 *
 * This saved you an hour of work? 
 * Send me music http://www.amazon.co.uk/wishlist/HNTU0468LQON
 */
function(t){var e,i,n=t.event;e=n.special.debouncedresize={setup:function(){t(this).on("resize",e.handler)},teardown:function(){t(this).off("resize",e.handler)},handler:function(t,a){var o=this,r=arguments,s=function(){t.type="debouncedresize",n.dispatch.apply(o,r)};i&&clearTimeout(i),a?s():i=setTimeout(s,e.threshold)},threshold:150}}(jQuery),function(t){var e,i=this,n=i.document,a=t(n),o=t(i),r=Array.prototype,s=1.28,l=!0,c=3e4,h=!1,u=navigator.userAgent.toLowerCase(),d=i.location.hash.replace(/#\//,""),p=function(){},f=function(){return!1},g=function(){var t=3,i=n.createElement("div"),a=i.getElementsByTagName("i");do i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->";while(a[0]);return t>4?t:e}(),m=function(){return{html:n.documentElement,body:n.body,head:n.getElementsByTagName("head")[0],title:n.title}},v="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",b=function(){var e=[];return t.each(v.split(" "),function(t,i){e.push(i),/_/.test(i)&&e.push(i.replace(/_/g,""))}),e}(),y=function(e){var i;return"object"!=typeof e?e:(t.each(e,function(n,a){/^[a-z]+_/.test(n)&&(i="",t.each(n.split("_"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),e[i]=a,delete e[n])}),e)},w=function(e){return t.inArray(e,b)>-1?Galleria[e.toUpperCase()]:e},_={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(t){return"http://www.youtube.com/embed/"+t},getThumb:function(e,i,n){n=n||p,t.getJSON("http://gdata.youtube.com/feeds/api/videos/"+e+"?v=2&alt=json-in-script&callback=?",function(t){try{i(t.entry.media$group.media$thumbnail[0].url)}catch(e){n()}}).error(n)}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(t){return"http://player.vimeo.com/video/"+t},getThumb:function(e,i,n){n=n||p,t.getJSON("http://vimeo.com/api/v2/video/"+e+".json?callback=?",function(t){try{i(t[0].thumbnail_medium)}catch(e){n()}}).error(n)}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(t){return"http://www.dailymotion.com/embed/video/"+t},getThumb:function(e,i,n){n=n||p,t.getJSON("https://api.dailymotion.com/video/"+e+"?fields=thumbnail_medium_url&callback=?",function(t){try{i(t.thumbnail_medium_url)}catch(e){n()}}).error(n)}}},x=function(t){var e;for(var i in _)if(e=t&&t.match(_[i].reg),e&&e.length)return{id:e[2],provider:i};return!1},k={support:function(){var t=m().html;return t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen}(),callback:p,enter:function(t,e){this.instance=t,this.callback=e||p;var i=m().html;i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||p,n.exitFullscreen?n.exitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen&&n.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var t=function(){if(k.instance){var t=k.instance._fullscreen;n.fullscreen||n.mozFullScreen||n.webkitIsFullScreen?t._enter(k.callback):t._exit(k.callback)}};n.addEventListener("fullscreenchange",t,!1),n.addEventListener("mozfullscreenchange",t,!1),n.addEventListener("webkitfullscreenchange",t,!1)}}},T={trunk:{},add:function(t,e,n,a){if(t=t||(new Date).getTime(),a=a||!1,this.clear(t),a){var o=e;e=function(){o(),T.add(t,e,n)}}this.trunk[t]=i.setTimeout(e,n)},clear:function(t){var e,n=function(t){i.clearTimeout(this.trunk[t]),delete this.trunk[t]};if(t&&t in this.trunk)n.call(T,t);else if("undefined"==typeof t)for(e in this.trunk)this.trunk.hasOwnProperty(e)&&n.call(T,e)}},$=[],C=[],j=!1,S=!1,I=[],G=function(e){Galleria.theme=e,t.each(I,function(t,e){e._initialized||e._init.call(e)})},A=function(){return{array:function(t){return r.slice.call(t,0)},create:function(t,e){e=e||"div";var i=n.createElement(e);return i.className=t,i},getScriptPath:function(e){e=e||t("script:last").attr("src");var i=e.split("/");return 1==i.length?"":(i.pop(),i.join("/")+"/")},animate:function(){var e,a,o,r,s,l,c,h=function(t){var e,n="transition WebkitTransition MozTransition OTransition".split(" ");if(i.opera)return!1;for(e=0;n[e];e++)if("undefined"!=typeof t[n[e]])return n[e];return!1}((n.body||n.documentElement).style),u={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[h],d={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},f=function(e,i,n){var a={};n=n||"transition",t.each("webkit moz ms o".split(" "),function(){a["-"+this+"-"+n]=i}),e.css(a)},g=function(t){f(t,"none","transition"),Galleria.WEBKIT&&Galleria.TOUCH&&(f(t,"translate3d(0,0,0)","transform"),t.data("revert")&&(t.css(t.data("revert")),t.data("revert",null)))};return function(n,m,v){return v=t.extend({duration:400,complete:p,stop:!1},v),n=t(n),v.duration?h?(v.stop&&(n.unbind(u),g(n)),e=!1,t.each(m,function(t,i){c=n.css(t),A.parseValue(c)!=A.parseValue(i)&&(e=!0),n.css(t,c)}),e?(a=[],o=v.easing in d?d[v.easing]:d._default,r=" "+v.duration+"ms"+" cubic-bezier("+o.join(",")+")",i.setTimeout(function(e,i,n,o){return function(){e.one(i,function(t){return function(){g(t),v.complete.call(t[0])}}(e)),Galleria.WEBKIT&&Galleria.TOUCH&&(s={},l=[0,0,0],t.each(["left","top"],function(t,i){i in n&&(l[t]=A.parseValue(n[i])-A.parseValue(e.css(i))+"px",s[i]=n[i],delete n[i])}),(l[0]||l[1])&&(e.data("revert",s),a.push("-webkit-transform"+o),f(e,"translate3d("+l.join(",")+")","transform"))),t.each(n,function(t){a.push(t+o)}),f(e,a.join(",")),e.css(n)}}(n,u,m,r),2),void 0):(i.setTimeout(function(){v.complete.call(n[0])},v.duration),void 0)):(n.animate(m,v),void 0):(n.css(m),v.complete.call(n[0]),void 0)}}(),removeAlpha:function(t){if(9>g&&t){var e=t.style,i=t.currentStyle,n=i&&i.filter||e.filter||"";/alpha/.test(n)&&(e.filter=n.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(e,i){e=t(e),e.attr("style")&&e.data("styles",e.attr("style")).removeAttr("style"),e.css(i)},revertStyles:function(){t.each(A.array(arguments),function(e,i){i=t(i),i.removeAttr("style"),i.attr("style",""),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(t){A.forceStyles(t,{position:"absolute",left:-1e4})},moveIn:function(){A.revertStyles.apply(A,A.array(arguments))},elem:function(e){return e instanceof t?{$:e,dom:e[0]}:{$:t(e),dom:e}},hide:function(t,e,i){i=i||p;var n=A.elem(t),a=n.$;t=n.dom,a.data("opacity")||a.data("opacity",a.css("opacity"));var o={opacity:0};if(e){var r=9>g&&t?function(){A.removeAlpha(t),t.style.visibility="hidden",i.call(t)}:i;A.animate(t,o,{duration:e,complete:r,stop:!0})}else 9>g&&t?(A.removeAlpha(t),t.style.visibility="hidden"):a.css(o)},show:function(t,e,i){i=i||p;var n=A.elem(t),a=n.$;t=n.dom;var o=parseFloat(a.data("opacity"))||1,r={opacity:o};if(e){9>g&&(a.css("opacity",0),t.style.visibility="visible");var s=9>g&&t?function(){1==r.opacity&&A.removeAlpha(t),i.call(t)}:i;A.animate(t,r,{duration:e,complete:s,stop:!0})}else 9>g&&1==r.opacity&&t?(A.removeAlpha(t),t.style.visibility="visible"):a.css(r)},optimizeTouch:function(){var e,i,n,a,o={},r=function(e){e.preventDefault(),o=t.extend({},e,!0)},s=function(){this.evt=o},l=function(){this.handler.call(e,this.evt)};return function(o){t(o).bind("touchend",function(o){for(e=o.target,a=!0;e.parentNode&&e!=o.currentTarget&&a;)i=t(e).data("events"),n=t(e).data("fakes"),i&&"click"in i?(a=!1,o.preventDefault(),t(e).click(r).click(),i.click.pop(),t.each(i.click,s),t(e).data("fakes",i.click),delete i.click):n&&(a=!1,o.preventDefault(),t.each(n,l)),e=e.parentNode})}}(),addTimer:function(){return T.add.apply(T,A.array(arguments)),this},clearTimer:function(){return T.clear.apply(T,A.array(arguments)),this},wait:function(e){e=t.extend({until:f,success:p,error:function(){Galleria.raise("Could not complete wait function.")},timeout:3e3},e);var n,a,o=A.timestamp(),r=function(){return a=A.timestamp(),n=a-o,e.until(n)?(e.success(),!1):"number"==typeof e.timeout&&a>=o+e.timeout?(e.error(),!1):(i.setTimeout(r,10),void 0)};i.setTimeout(r,10)},toggleQuality:function(t,e){7!==g&&8!==g||!t||"IMG"!=t.nodeName.toUpperCase()||("undefined"==typeof e&&(e="nearest-neighbor"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?"bicubic":"nearest-neighbor")},insertStyleTag:function(t){var e=n.createElement("style");if(m().head.appendChild(e),e.styleSheet)e.styleSheet.cssText=t;else{var i=n.createTextNode(t);e.appendChild(i)}},loadScript:function(e,i){var n=!1,a=t("<script>").attr({src:e,async:!0}).get(0);a.onload=a.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,a.onload=a.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},m().head.appendChild(a)},parseValue:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=t.match(/\-?\d|\./g);return e&&e.constructor===Array?1*e.join(""):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(a,o,r){var s,l,c=!1,h=function(){var t=new Image;t.onload=t.onerror=function(){t=null,c=!0},t.src=a};return t("link[rel=stylesheet]").each(function(){return new RegExp(a).test(this.href)?(s=this,!1):void 0}),"function"==typeof o&&(r=o,o=e),r=r||p,s?(r.call(s,s),s):(l=n.styleSheets.length,t("#"+o).length?(t("#"+o).attr("href",a),l--,c=!0):(s=t("<link>").attr({rel:"stylesheet",href:a,id:o}).get(0),i.setTimeout(function(){var e=t('link[rel="stylesheet"], style');if(e.length?e.get(0).parentNode.insertBefore(s,e[0]):m().head.appendChild(s),g){if(l>=31)return Galleria.raise("You have reached the browser stylesheet limit (31)",!0),void 0;s.onreadystatechange=function(){c||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(c=!0)}}else{var o=n.createElement("a"),r=i.location;o.href=a,/file/.test(r.protocol)||r.hostname!=o.hostname||r.port!=o.port||r.protocol!=o.protocol?h():t.ajax({url:a,success:function(){c=!0},error:h})}},10)),"function"==typeof r&&A.wait({until:function(){return c&&n.styleSheets.length>l},success:function(){i.setTimeout(function(){r.call(s,s)},100)},error:function(){Galleria.raise("Theme CSS could not load",!0)},timeout:1e4}),s)}}}(),H=function(){var e=function(e,i,n,a){var o=this.getOptions("easing"),r=this.getStageWidth(),s={left:r*(e.rewind?-1:1)},l={left:0};n?(s.opacity=0,l.opacity=1):s.opacity=1,t(e.next).css(s),A.animate(e.next,l,{duration:e.speed,complete:function(t){return function(){i(),t.css({left:0})}}(t(e.next).add(e.prev)),queue:!1,easing:o}),a&&(e.rewind=!e.rewind),e.prev&&(s={left:0},l={left:r*(e.rewind?1:-1)},n&&(s.opacity=1,l.opacity=0),t(e.prev).css(s),A.animate(e.prev,l,{duration:e.speed,queue:!1,easing:o,complete:function(){t(this).css("opacity",0)}}))};return{fade:function(e,i){t(e.next).css({opacity:0,left:0}).show(),A.animate(e.next,{opacity:1},{duration:e.speed,complete:i}),e.prev&&(t(e.prev).css("opacity",1).show(),A.animate(e.prev,{opacity:0},{duration:e.speed}))},flash:function(e,i){t(e.next).css({opacity:0,left:0}),e.prev?A.animate(e.prev,{opacity:0},{duration:e.speed/2,complete:function(){A.animate(e.next,{opacity:1},{duration:e.speed,complete:i})}}):A.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},pulse:function(e,i){e.prev&&t(e.prev).hide(),t(e.next).css({opacity:0,left:0}).show(),A.animate(e.next,{opacity:1},{duration:e.speed,complete:i})},slide:function(){e.apply(this,A.array(arguments))},fadeslide:function(){e.apply(this,A.array(arguments).concat([!0]))},doorslide:function(){e.apply(this,A.array(arguments).concat([!1,!0]))}}}();k.listen(),Galleria=function(){var n=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=e,this._binds=[],this._id=parseInt(1e4*Math.random(),10);var r="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",s="current total";t.each(r.split(" "),function(t,e){n._dom[e]=A.create("galleria-"+e)}),t.each(s.split(" "),function(t,e){n._dom[e]=A.create("galleria-"+e,"span")});var l=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in l.map&&"function"==typeof l.map[e]&&l.map[e].call(n,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&(i=e.toUpperCase(),i in l.keys?l.map[l.keys[i]]=t[e]:l.map[i]=t[e]);l.bound||(l.bound=!0,a.bind("keydown",l.press))},detach:function(){l.bound=!1,l.map={},a.unbind("keydown",l.press)}},c=this._controls={0:e,1:e,active:0,swap:function(){c.active=c.active?0:1},getActive:function(){return c[c.active]},getNext:function(){return c[1-c.active]}},h=this._carousel={next:n.$("thumb-nav-right"),prev:n.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var e=0,i=0,a=[0];t.each(n._thumbnails,function(n,o){o.ready&&(e+=o.outerWidth||t(o.container).outerWidth(!0),a[n+1]=e,i=Math.max(i,o.outerHeight||t(o.container).outerHeight(!0)))}),n.$("thumbnails").css({width:e,height:i}),h.max=e,h.hooks=a,h.width=n.$("thumbnails-list").width(),h.setClasses(),n.$("thumbnails-container").toggleClass("galleria-carousel",e>h.width),h.width=n.$("thumbnails-list").width()},bindControls:function(){var t;h.next.bind("click",function(e){if(e.preventDefault(),"auto"===n._options.carouselSteps){for(t=h.current;t<h.hooks.length;t++)if(h.hooks[t]-h.hooks[h.current]>h.width){h.set(t-2);break}}else h.set(h.current+n._options.carouselSteps)}),h.prev.bind("click",function(e){if(e.preventDefault(),"auto"===n._options.carouselSteps)for(t=h.current;t>=0;t--){if(h.hooks[h.current]-h.hooks[t]>h.width){h.set(t+2);break}if(0===t){h.set(0);break}}else h.set(h.current-n._options.carouselSteps)})},set:function(t){for(t=Math.max(t,0);h.hooks[t-1]+h.width>=h.max&&t>=0;)t--;h.current=t,h.animate()},getLast:function(t){return(t||h.current)-1},follow:function(t){if(0===t||t===h.hooks.length-2)return h.set(t),void 0;for(var e=h.current;h.hooks[e]-h.hooks[h.current]<h.width&&e<=h.hooks.length;)e++;t-1<h.current?h.set(t-1):t+2>e&&h.set(t-e+h.current+2)},setClasses:function(){h.prev.toggleClass("disabled",!h.current),h.next.toggleClass("disabled",h.hooks[h.current]+h.width>=h.max)},animate:function(){h.setClasses();var t=-1*h.hooks[h.current];isNaN(t)||A.animate(n.get("thumbnails"),{left:t},{duration:n._options.carouselSpeed,easing:n._options.easing,queue:!1})}},u=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+n._id,swapTimer:"swap"+n._id,init:function(){u.initialized=!0;var t=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";A.insertStyleTag(t),n.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(t){var e=n.getMousePosition(t).x,i=n.getMousePosition(t).y,a=n.$("tooltip"),o=e,r=i,s=a.outerHeight(!0)+1,l=a.outerWidth(!0),c=s+15,h=n.$("container").width()-l-2,u=n.$("container").height()-s-2;isNaN(o)||isNaN(r)||(o+=10,r-=30,o=Math.max(0,Math.min(h,o)),r=Math.max(0,Math.min(u,r)),c>i&&(r=c),a.css({left:o,top:r}))},bind:function(e,i){if(!Galleria.TOUCH){u.initialized||u.init();var a=function(e,i){u.define(e,i),t(e).hover(function(){A.clearTimer(u.swapTimer),n.$("container").unbind("mousemove",u.move).bind("mousemove",u.move).trigger("mousemove"),u.show(e),A.addTimer(u.timer,function(){n.$("tooltip").stop().show().animate({opacity:1}),u.open=!0},u.open?0:500)},function(){n.$("container").unbind("mousemove",u.move),A.clearTimer(u.timer),n.$("tooltip").stop().animate({opacity:0},200,function(){n.$("tooltip").hide(),A.addTimer(u.swapTimer,function(){u.open=!1},1e3)})}).click(function(){t(this).trigger("mouseout")})};"string"==typeof i?a(e in n._dom?n.get(e):e,i):t.each(e,function(t,e){a(n.get(t),e)})}},show:function(e){e=t(e in n._dom?n.get(e):e);var a=e.data("tt"),o=function(t){i.setTimeout(function(t){return function(){u.move(t)}}(t),10),e.unbind("mouseup",o)};a="function"==typeof a?a():a,a&&(n.$("tooltip").html(a.replace(/\s/,"&nbsp;")),e.bind("mouseup",o))},define:function(e,i){if("function"!=typeof i){var a=i;i=function(){return a}}e=t(e in n._dom?n.get(e):e).data("tt",i),u.show(e)}},d=this._fullscreen={scrolled:0,crop:e,transition:e,active:!1,keymap:n._keyboard.map,enter:function(t){n._options.trueFullscreen&&k.support?k.enter(n,t):d._enter(t)},_enter:function(i){d.active=!0,A.hide(n.getActiveImage()),n.$("container").addClass("fullscreen"),d.scrolled=o.scrollTop(),A.forceStyles(n.get("container"),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4});var a={height:"100%",overflow:"hidden",margin:0,padding:0},r=n.getData(),s=n._options;if(A.forceStyles(m().html,a),A.forceStyles(m().body,a),d.keymap=t.extend({},n._keyboard.map),n.attachKeyboard({escape:n.exitFullscreen,right:n.next,left:n.prev}),d.crop=s.imageCrop,s.fullscreenCrop!=e&&(s.imageCrop=s.fullscreenCrop),r&&r.big&&r.image!==r.big){var l=new Galleria.Picture,c=l.isCached(r.big),h=n.getIndex(),u=n._thumbnails[h];n.trigger({type:Galleria.LOADSTART,cached:c,rewind:!1,index:h,imageTarget:n.getActiveImage(),thumbTarget:u,galleriaData:r}),l.load(r.big,function(e){n._scaleImage(e,{complete:function(e){n.trigger({type:Galleria.LOADFINISH,cached:c,index:h,rewind:!1,imageTarget:e.image,thumbTarget:u});var i=n._controls.getActive().image;i&&t(i).width(e.image.width).height(e.image.height).attr("style",t(e.image).attr("style")).attr("src",e.image.src)}})})}n.rescale(function(){A.addTimer(!1,function(){A.show(n.getActiveImage()),"function"==typeof i&&i.call(n)},100),n.trigger(Galleria.FULLSCREEN_ENTER)}),o.resize(function(){d.scale()})},scale:function(){n.rescale()},exit:function(t){n._options.trueFullscreen&&k.support?k.exit(t):d._exit(t)},_exit:function(t){d.active=!1,A.hide(n.getActiveImage()),n.$("container").removeClass("fullscreen"),A.revertStyles(n.get("container"),m().html,m().body),i.scrollTo(0,d.scrolled),n.detachKeyboard(),n.attachKeyboard(d.keymap),n._options.imageCrop=d.crop;var e=n.getData().big,a=n._controls.getActive().image;!n.getData().iframe&&a&&e&&e==a.src&&i.setTimeout(function(t){return function(){a.src=t}}(n.getData().image),1),n.rescale(function(){A.addTimer(!1,function(){A.show(n.getActiveImage()),"function"==typeof t&&t.call(n),o.trigger("resize")},50),n.trigger(Galleria.FULLSCREEN_EXIT)}),o.unbind("resize",d.scale)}},p=this._idle={timer:"idle"+n._id,trunk:[],bound:!1,add:function(e,i){if(e){p.bound||p.addEvent(),e=t(e);var n,a={};for(n in i)i.hasOwnProperty(n)&&(a[n]=e.css(n));e.data("idle",{from:a,to:i,complete:!0,busy:!1}),p.addTimer(),p.trunk.push(e)}},remove:function(e){e=jQuery(e),t.each(p.trunk,function(t,i){i&&i.length&&!i.not(e).length&&(n._idle.show(e),n._idle.trunk.splice(t,1))}),p.trunk.length||(p.removeEvent(),A.clearTimer(p.timer))},addEvent:function(){p.bound=!0,n.$("container").bind("mousemove click",p.showAll)},removeEvent:function(){p.bound=!1,n.$("container").unbind("mousemove click",p.showAll)},addTimer:function(){A.addTimer(p.timer,function(){p.hide()},n._options.idleTime)},hide:function(){n._options.idleMode&&n.getIndex()!==!1&&!n.getData().iframe&&(n.trigger(Galleria.IDLE_ENTER),t.each(p.trunk,function(t,e){var i=e.data("idle");i&&(e.data("idle").complete=!1,A.animate(e,i.to,{duration:n._options.idleSpeed}))}))},showAll:function(){A.clearTimer(p.timer),t.each(p.trunk,function(t,e){p.show(e)})},show:function(e){var i=e.data("idle");i.busy||i.complete||(i.busy=!0,n.trigger(Galleria.IDLE_EXIT),A.clearTimer(p.timer),A.animate(e,i.from,{duration:n._options.idleSpeed/2,complete:function(){t(this).data("idle").busy=!1,t(this).data("idle").complete=!0}})),p.addTimer()}},f=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(n.trigger(Galleria.LIGHTBOX_OPEN),!f.initialized){f.initialized=!0;var e="overlay box content shadow title info close prevholder prev nextholder next counter image",i={},a=n._options,o="",r="position:absolute;",s="lightbox-",l={overlay:"position:fixed;display:none;opacity:"+a.overlayOpacity+";filter:alpha(opacity="+100*a.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+a.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:r+"background:#000;width:100%;height:100%;",content:r+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:r+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:r+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:r+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:r+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:r+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:r+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:r+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},c=function(e){return e.hover(function(){t(this).css("color","#bbb")},function(){t(this).css("color","#444")})},h={};g&&g>7&&(l.nextholder+="background:#000;filter:alpha(opacity=0);",l.prevholder+="background:#000;filter:alpha(opacity=0);"),t.each(l,function(t,e){o+=".galleria-"+s+t+"{"+e+"}"}),o+=".galleria-"+s+"box.iframe .galleria-"+s+"prevholder,"+".galleria-"+s+"box.iframe .galleria-"+s+"nextholder{"+"width:100px;height:100px;top:50%;margin-top:-70px}",A.insertStyleTag(o),t.each(e.split(" "),function(t,e){n.addElement("lightbox-"+e),i[e]=f.elems[e]=n.get("lightbox-"+e)}),f.image=new Galleria.Picture,t.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(e,i){var n=[];t.each(i.split(" "),function(t,e){n.push(s+e)}),h[s+e]=n}),n.append(h),t(i.image).append(f.image.container),t(m().body).append(i.overlay,i.box),A.optimizeTouch(i.box),c(t(i.close).bind("click",f.hide).html("&#215;")),t.each(["Prev","Next"],function(e,n){var a=t(i[n.toLowerCase()]).html(/v/.test(n)?"&#8249;&nbsp;":"&nbsp;&#8250;"),o=t(i[n.toLowerCase()+"holder"]);return o.bind("click",function(){f["show"+n]()}),8>g||Galleria.TOUCH?(a.show(),void 0):(o.hover(function(){a.show()},function(){a.stop().fadeOut(200)}),void 0)}),t(i.overlay).bind("click",f.hide),Galleria.IPAD&&(n._options.lightboxTransitionSpeed=0)}},rescale:function(e){var i=Math.min(o.width()-40,f.width),a=Math.min(o.height()-60,f.height),r=Math.min(i/f.width,a/f.height),s=Math.round(f.width*r)+40,l=Math.round(f.height*r)+60,c={width:s,height:l,"margin-top":-1*Math.ceil(l/2),"margin-left":-1*Math.ceil(s/2)};e?t(f.elems.box).css(c):t(f.elems.box).animate(c,{duration:n._options.lightboxTransitionSpeed,easing:n._options.easing,complete:function(){var e=f.image,i=n._options.lightboxFadeSpeed;n.trigger({type:Galleria.LIGHTBOX_IMAGE,imageTarget:e.image}),t(e.container).show(),t(e.image).animate({opacity:1},i),A.show(f.elems.info,i)}})},hide:function(){f.image.image=null,o.unbind("resize",f.rescale),t(f.elems.box).hide(),A.hide(f.elems.info),n.detachKeyboard(),n.attachKeyboard(f.keymap),f.keymap=!1,A.hide(f.elems.overlay,200,function(){t(this).hide().css("opacity",n._options.overlayOpacity),n.trigger(Galleria.LIGHTBOX_CLOSE)})},showNext:function(){f.show(n.getNext(f.active))},showPrev:function(){f.show(n.getPrev(f.active))},show:function(e){f.active=e="number"==typeof e?e:n.getIndex()||0,f.initialized||f.init(),f.keymap||(f.keymap=t.extend({},n._keyboard.map),n.attachKeyboard({escape:f.hide,right:f.showNext,left:f.showPrev})),o.unbind("resize",f.rescale);var a,r,s,l=n.getData(e),c=n.getDataLength(),h=n.getNext(e);A.hide(f.elems.info);try{for(s=n._options.preload;s>0;s--)r=new Galleria.Picture,a=n.getData(h),r.preload("big"in a?a.big:a.image),h=n.getNext(h)}catch(u){}f.image.isIframe=!!l.iframe,t(f.elems.box).toggleClass("iframe",!!l.iframe),f.image.load(l.iframe||l.big||l.image,function(n){f.width=n.isIframe?t(i).width():n.original.width,f.height=n.isIframe?t(i).height():n.original.height,t(n.image).css({width:n.isIframe?"100%":"100.1%",height:n.isIframe?"100%":"100.1%",top:0,zIndex:99998,opacity:0,visibility:"visible"}),f.elems.title.innerHTML=l.title||"",f.elems.counter.innerHTML=e+1+" / "+c,o.resize(f.rescale),f.rescale()}),t(f.elems.overlay).show().css("visibility","visible"),t(f.elems.box).show()}};return this},Galleria.prototype={constructor:Galleria,init:function(i,n){return n=y(n),this._original={target:i,options:n,data:null},this._target=this._dom.target=i.nodeName?i:t(i).get(0),this._original.html=this._target.innerHTML,C.push(this),this._target?(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSource:this._target,debug:e,dummy:e,easing:"galleria",extend:function(){},fullscreenCrop:e,fullscreenDoubleTap:!0,fullscreenTransition:e,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:e,initialTransition:e,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:e,minScaleRatio:e,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!1,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:!0,thumbCrop:!0,thumbEventType:"click",thumbFit:!0,thumbMargin:0,thumbQuality:"auto",thumbnails:!0,touchTransition:e,transition:"fade",transitionInitial:e,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,n&&n.debug===!1&&(l=!1),n&&"number"==typeof n.imageTimeout&&(c=n.imageTimeout),n&&"string"==typeof n.dummy&&(h=n.dummy),t(this._target).children().hide(),"object"==typeof Galleria.theme?this._init():I.push(this),this):(Galleria.raise("Target not found",!0),void 0)},_init:function(){var e=this,a=this._options;if(this._initialized)return Galleria.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!Galleria.theme)return Galleria.raise("Init failed: No theme found.",!0),this;if(t.extend(!0,a,Galleria.theme.defaults,this._original.options,Galleria.configure.options),function(t){return"getContext"in t?(S=S||{elem:t,context:t.getContext("2d"),cache:{},length:0},void 0):(t=null,void 0)}(n.createElement("canvas")),this.bind(Galleria.DATA,function(){Galleria.QUIRK&&Galleria.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML."),this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var t=this.$("container"),n={width:0,height:0},a=function(){return e.$("stage").height()};A.wait({until:function(){return n=e._getWH(),t.width(n.width).height(n.height),a()&&n.width&&n.height>50},success:function(){e._width=n.width,e._height=n.height,Galleria.WEBKIT?i.setTimeout(function(){e._run()},1):e._run()},error:function(){a()?Galleria.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):Galleria.raise("Could not extract a stage height from the CSS. Traced height: "+a()+"px.",!0)},timeout:"number"==typeof this._options.wait?this._options.wait:!1})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),A.hide(this.$("counter").append(this.get("current"),n.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),A.hide(e.get("tooltip")),this.$("container").addClass(Galleria.TOUCH?"touch":"notouch"),t.each(new Array(2),function(i){var n=new Galleria.Picture;t(n.container).css({position:"absolute",top:0,left:0}).prepend(e._layers[i]=t(A.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),e.$("images").append(n.container),e._controls[i]=n}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").bind("click",function(t){a.clicknext&&t.stopPropagation(),a.pauseOnInteraction&&e.pause();var i=/right/.test(this.className)?"next":"prev";e[i]()}),t.each(["info","counter","image-nav"],function(t,i){a["show"+i.substr(0,1).toUpperCase()+i.substr(1).replace(/-/,"")]===!1&&A.moveOut(e.get(i.toLowerCase()))}),this.load(),a.keepSource||g||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),a.carousel){var r=0,s=a.show;this.bind(Galleria.THUMBNAIL,function(){this.updateCarousel(),++r==this.getDataLength()&&"number"==typeof s&&s>0&&this._carousel.follow(s)})}return a.responsive&&o.bind("resize",function(){e.isFullscreen()||e.resize()}),a.swipe&&(function(t){var i,n=[0,0],a=[0,0],o=30,r=100,s=!1,l=0,c={start:"touchstart",move:"touchmove",stop:"touchend"},h=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t},u=function(t){t.originalEvent.touches&&t.originalEvent.touches.length>1||(i=h(t),a=[i.pageX,i.pageY],n[0]||(n=a),Math.abs(n[0]-a[0])>10&&t.preventDefault())},d=function(i){return t.unbind(c.move,u),i.originalEvent.touches&&i.originalEvent.touches.length||s?(s=!s,void 0):(A.timestamp()-l<1e3&&Math.abs(n[0]-a[0])>o&&Math.abs(n[1]-a[1])<r&&(i.preventDefault(),e[n[0]>a[0]?"next":"prev"]()),n=a=[0,0],void 0)};t.bind(c.start,function(e){e.originalEvent.touches&&e.originalEvent.touches.length>1||(i=h(e),l=A.timestamp(),n=a=[i.pageX,i.pageY],t.bind(c.move,u).one(c.stop,d))})}(e.$("images")),a.fullscreenDoubleTap&&this.$("stage").bind("touchstart",function(){var t,i,n,a,o,r,s=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t};return function(l){return r=Galleria.utils.timestamp(),i=s(l).pageX,n=s(l).pageY,500>r-t&&20>i-a&&20>n-o?(e.toggleFullscreen(),l.preventDefault(),e.$("stage").unbind("touchend",arguments.callee),void 0):(t=r,a=i,o=n,void 0)}}())),A.optimizeTouch(this.get("container")),t.each(Galleria.on.binds,function(i,n){-1==t.inArray(n.hash,e._binds)&&e.bind(n.type,n.callback)}),this},_getWH:function(){var e,i=this.$("container"),n=this.$("target"),a=this,o={};return t.each(["width","height"],function(t,r){a._options[r]&&"number"==typeof a._options[r]?o[r]=a._options[r]:(e=[A.parseValue(i.css(r)),A.parseValue(n.css(r)),i[r](),n[r]()],a["_"+r]||e.splice(e.length,A.parseValue(i.css("min-"+r)),A.parseValue(n.css("min-"+r))),o[r]=Math.max.apply(Math,e))}),a._options.height&&a._options.height<2&&(o.height=o.width*a._options.height),o},_createThumbnails:function(){this.get("total").innerHTML=this.getDataLength();var e,a,o,r,s,l,c=this,h=this._options,u=function(){var t=c.$("thumbnails").find(".active");return t.length?t.find("img").attr("src"):!1}(),d="string"==typeof h.thumbnails?h.thumbnails.toLowerCase():null,p=function(t){return n.defaultView&&n.defaultView.getComputedStyle?n.defaultView.getComputedStyle(o.container,null)[t]:l.css(t)},f=function(e,i,n){return function(){t(n).append(e),c.trigger({type:Galleria.THUMBNAIL,thumbTarget:e,index:i,galleriaData:c.getData(i)})}},g=function(e){h.pauseOnInteraction&&c.pause();var i=t(e.currentTarget).data("index");c.getIndex()!==i&&c.show(i),e.preventDefault()
},m=function(e){e.scale({width:e.data.width,height:e.data.height,crop:h.thumbCrop,margin:h.thumbMargin,canvas:h.useCanvas,complete:function(e){var i,n,a=["left","top"],o=["Width","Height"],r=c.getData(e.index),s=r.thumb.split(":");t.each(o,function(o,r){i=r.toLowerCase(),h.thumbCrop===!0&&h.thumbCrop!==i||!h.thumbFit||(n={},n[i]=e[i],t(e.container).css(n),n={},n[a[o]]=0,t(e.image).css(n)),e["outer"+r]=t(e.container)["outer"+r](!0)}),A.toggleQuality(e.image,h.thumbQuality===!0||"auto"===h.thumbQuality&&e.original.width<3*e.width),r.iframe&&2==s.length&&s[0]in _&&_[s[0]].getThumb(s[1],function(t){return function(e){t.src=e}}(e.image)),c.trigger({type:Galleria.THUMBNAIL,thumbTarget:e.image,index:e.data.order,galleriaData:c.getData(e.data.order)})}})};for(this._thumbnails=[],this.$("thumbnails").empty(),e=0;this._data[e];e++)r=this._data[e],h.thumbnails===!0&&(r.thumb||r.image)?(o=new Galleria.Picture(e),o.index=e,a=r.thumb||r.image,this.$("thumbnails").append(o.container),l=t(o.container),o.data={width:A.parseValue(p("width")),height:A.parseValue(p("height")),order:e},h.thumbFit&&h.thumbCrop!==!0?l.css({width:"auto",height:"auto"}):l.css({width:o.data.width,height:o.data.height}),s=a.split(":"),2==s.length&&s[0]in _?o.load("data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",{height:o.data.height,width:1.25*o.data.height},m):o.load(a,m),"all"===h.preload&&o.preload(r.image)):r.iframe||"empty"===d||"numbers"===d?(o={container:A.create("galleria-image"),image:A.create("img","span"),ready:!0},"numbers"===d&&t(o.image).text(e+1),r.iframe&&t(o.image).addClass("iframe"),this.$("thumbnails").append(o.container),i.setTimeout(f(o.image,e,o.container),50+20*e)):o={container:null,image:null},t(o.container).add(h.keepSource&&h.linkSourceImages?r.original:null).data("index",e).bind(h.thumbEventType,g),u===a&&t(o.container).addClass("active"),this._thumbnails.push(o)},_run:function(){var n=this;n._createThumbnails(),A.wait({timeout:1e4,until:function(){return Galleria.OPERA&&n.$("stage").css("display","inline-block"),n._stageWidth=n.$("stage").width(),n._stageHeight=n.$("stage").height(),n._stageWidth&&n._stageHeight>50},success:function(){return $.push(n),A.show(n.get("counter")),n._options.carousel&&n._carousel.bindControls(),n._options.autoplay&&(n.pause(),"number"==typeof n._options.autoplay&&(n._playtime=n._options.autoplay),n.trigger(Galleria.PLAY),n._playing=!0),n._firstrun?("number"==typeof n._options.show&&n.show(n._options.show),void 0):(n._firstrun=!0,Galleria.History&&Galleria.History.change(function(t){isNaN(t)?i.history.go(-1):n.show(t,e,!0)}),n.trigger(Galleria.READY),Galleria.theme.init.call(n,n._options),t.each(Galleria.ready.callbacks,function(){this.call(n,n._options)}),n._options.extend.call(n,n._options),/^[0-9]{1,4}$/.test(d)&&Galleria.History?n.show(d,e,!0):n._data[n._options.show]&&n.show(n._options.show),void 0)},error:function(){Galleria.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+n._stageWidth+"px, height: "+n._stageHeight+"px.",!0)}})},load:function(e,i,n){var a=this;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof i&&(n=i,i=null),e=e||this._options.dataSource,i=i||this._options.dataSelector,n=n||this._options.dataConfig,/^function Object/.test(e.constructor)&&(e=[e]),e.constructor===Array?(this.validate(e)?(this._data=e,this._parseData().trigger(Galleria.DATA)):Galleria.raise("Load failed: JSON Array not valid."),this):(i+=",.video,.iframe",t(e).find(i).each(function(e,i){i=t(i);var o={},r=i.parent(),s=r.attr("href"),l=r.attr("rel");s&&("IMG"==i[0].nodeName||i.hasClass("video"))&&x(s)?o.video=s:s&&i.hasClass("iframe")?o.iframe=s:o.image=o.big=s,l&&(o.big=l),t.each("big title description link layer".split(" "),function(t,e){i.data(e)&&(o[e]=i.data(e))}),a._data.push(t.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},o,n(i)))}),this.getDataLength()&&this._parseData().trigger(Galleria.DATA),this)},_parseData:function(){var e,i=this;return t.each(this._data,function(n,a){if(e=i._data[n],"thumb"in a==!1&&(e.thumb=a.image),!1 in a&&(e.big=a.image),"video"in a){var o=x(a.video);o&&(e.iframe=_[o.provider].embed(o.id)+function(){if("object"==typeof i._options[o.provider]){var e="?",n=[];return t.each(i._options[o.provider],function(t,e){n.push(t+"="+e)}),"youtube"==o.provider&&(n=["wmode=opaque"].concat(n)),e+n.join("&")}return""}(),delete e.video,"thumb"in e&&e.thumb||(e.thumb=o.provider+":"+o.id))}}),this},destroy:function(){return this.get("target").innerHTML=this._original.html,this},splice:function(){var t=this,e=A.array(arguments);return i.setTimeout(function(){r.splice.apply(t._data,e),t._parseData()._createThumbnails()},2),t},push:function(){var t=this,e=A.array(arguments);return i.setTimeout(function(){r.push.apply(t._data,e),t._parseData()._createThumbnails()},2),t},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(t,e){return t=w(t),this.$("container").bind(t,this.proxy(e)),this},unbind:function(t){return t=w(t),this.$("container").unbind(t),this},trigger:function(e){return e="object"==typeof e?t.extend(e,{scope:this}):{type:w(e),scope:this},this.$("container").trigger(e),this},addIdleState:function(){return this._idle.add.apply(this._idle,A.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,A.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,A.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,A.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,A.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,A.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,A.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,A.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,A.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,A.array(arguments)),this},getActiveImage:function(){return this._getActive().image||e},getActiveThumb:function(){return this._thumbnails[this._active].image||e},getMousePosition:function(t){return{x:t.pageX-this.$("container").offset().left,y:t.pageY-this.$("container").offset().top}},addPan:function(e){if(this._options.imageCrop!==!1){e=t(e||this.getActiveImage());var i=this,n=e.width()/2,a=e.height()/2,o=parseInt(e.css("left"),10),r=parseInt(e.css("top"),10),s=o||0,l=r||0,c=0,h=0,u=!1,d=A.timestamp(),p=0,f=0,m=function(t,i,n){if(t>0&&(f=Math.round(Math.max(-1*t,Math.min(0,i))),p!==f))if(p=f,8===g)e.parent()["scroll"+n](-1*f);else{var a={};a[n.toLowerCase()]=f,e.css(a)}},v=function(t){A.timestamp()-d<50||(u=!0,n=i.getMousePosition(t).x,a=i.getMousePosition(t).y)},b=function(){u&&(c=e.width()-i._stageWidth,h=e.height()-i._stageHeight,o=-1*n/i._stageWidth*c,r=-1*a/i._stageHeight*h,s+=(o-s)/i._options.imagePanSmoothness,l+=(r-l)/i._options.imagePanSmoothness,m(h,l,"Top"),m(c,s,"Left"))};return 8===g&&(e.parent().scrollTop(-1*l).scrollLeft(-1*s),e.css({top:0,left:0})),this.$("stage").unbind("mousemove",v).bind("mousemove",v),A.addTimer("pan"+i._id,b,50,!0),this}},proxy:function(t,e){return"function"!=typeof t?p:(e=e||this,function(){return t.apply(e,A.array(arguments))})},removePan:function(){return this.$("stage").unbind("mousemove"),A.clearTimer("pan"+this._id),this},addElement:function(){var e=this._dom;return t.each(A.array(arguments),function(t,i){e[i]=A.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,A.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,A.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(){return this.$(A.array(arguments).join(",")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(e,i){if(e=e||this._controls.getActive()){var n,a=function(e){t(e.container).children(":first").css({top:Math.max(0,A.parseValue(e.image.style.top)),left:Math.max(0,A.parseValue(e.image.style.left)),width:A.parseValue(e.image.width),height:A.parseValue(e.image.height)})};return i=t.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition},i),this._options.layerFollow&&this._options.imageCrop!==!0?"function"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(e,e),a(e)}):i.complete=a:t(e.container).children(":first").css({top:0,left:0}),e.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(i,n){"function"==typeof i&&(n=i,i=e),i=t.extend({width:0,height:0},i);var a,o=this,r=this.$("container"),s=!("aspect"!=this._options.responsive||i.width&&i.height);return t.each(i,function(t,e){e||(r[t]("auto"),i[t]=o._getWH()[t])}),s&&(a=Math.min(i.width/this._width,i.height/this._height)),t.each(i,function(t,e){r[t](a?a*o["_"+t]:e)}),this.rescale(n)},rescale:function(t,i,n){var a=this;"function"==typeof t&&(n=t,t=e);var o=function(){a._stageWidth=t||a.$("stage").width(),a._stageHeight=i||a.$("stage").height(),a._scaleImage(),a._options.carousel&&a.updateCarousel(),a.trigger(Galleria.RESCALE),"function"==typeof n&&n.call(a)};return!Galleria.WEBKIT||Galleria.TOUCH||t||i?o.call(a):A.addTimer(!1,o,10),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},show:function(t,e,i){return t===!1||!this._options.queue&&this._queue.stalled?void 0:(t=Math.max(0,Math.min(parseInt(t,10),this.getDataLength()-1)),e="undefined"!=typeof e?!!e:t<this.getIndex(),i=i||!1,!i&&Galleria.History?(Galleria.History.set(t.toString()),void 0):(this._active=t,r.push.call(this._queue,{index:t,rewind:e}),this._queue.stalled||this._show(),this))},_show:function(){var n=this,a=this._queue[0],o=this.getData(a.index);if(o){var s=o.iframe||(this.isFullscreen()&&"big"in o?o.big:o.image),l=this._controls.getActive(),c=this._controls.getNext(),h=c.isCached(s),u=this._thumbnails[a.index],d=function(){t(c.image).trigger("mouseup")},p=function(e,a,o,s,l){return function(){var c;n._queue.stalled=!1,A.toggleQuality(a.image,n._options.imageQuality),n._layers[n._controls.active].innerHTML="",t(o.container).css({zIndex:0,opacity:0}).show(),o.isIframe&&t(o.container).find("iframe").remove(),n.$("container").toggleClass("iframe",!!e.iframe),t(a.container).css({zIndex:1,left:0,top:0}).show(),n._controls.swap(),n._options.imagePan&&n.addPan(a.image),(e.link||n._options.lightbox||n._options.clicknext)&&t(a.image).css({cursor:"pointer"}).bind("mouseup",function(){return n._options.clicknext&&!Galleria.TOUCH?(n._options.pauseOnInteraction&&n.pause(),n.next(),void 0):e.link?(n._options.popupLinks?c=i.open(e.link,"_blank"):i.location.href=e.link,void 0):(n._options.lightbox&&n.openLightbox(),void 0)}),r.shift.call(n._queue),n._queue.length&&n._show(),n._playCheck(),n.trigger({type:Galleria.IMAGE,index:s.index,imageTarget:a.image,thumbTarget:l.image,galleriaData:e})}}(o,c,l,a,u);if(this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(a.index),this._options.preload){var f,g,m,v=this.getNext();try{for(g=this._options.preload;g>0;g--)f=new Galleria.Picture,m=n.getData(v),f.preload(this.isFullscreen()&&"big"in m?m.big:m.image),v=n.getNext(v)}catch(b){}}A.show(c.container),c.isIframe=!!o.iframe,t(n._thumbnails[a.index].container).addClass("active").siblings(".active").removeClass("active"),n.trigger({type:Galleria.LOADSTART,cached:h,index:a.index,rewind:a.rewind,imageTarget:c.image,thumbTarget:u.image,galleriaData:o}),c.load(s,function(i){var r=t(n._layers[1-n._controls.active]).html(o.layer||"").hide();n._scaleImage(i,{complete:function(i){"image"in l&&A.toggleQuality(l.image,!1),A.toggleQuality(i.image,!1),n._queue.stalled=!0,n.removePan(),n.setInfo(a.index),n.setCounter(a.index),o.layer&&(r.show(),(o.link||n._options.lightbox||n._options.clicknext)&&r.css("cursor","pointer").unbind("mouseup").mouseup(d)),n.trigger({type:Galleria.LOADFINISH,cached:h,index:a.index,rewind:a.rewind,imageTarget:i.image,thumbTarget:n._thumbnails[a.index].image,galleriaData:n.getData(a.index)});var s=n._options.transition;if(t.each({initial:null===l.image,touch:Galleria.TOUCH,fullscreen:n.isFullscreen()},function(t,i){return i&&n._options[t+"Transition"]!==e?(s=n._options[t+"Transition"],!1):void 0}),s in H==!1)p();else{var c={prev:l.container,next:i.container,rewind:a.rewind,speed:n._options.transitionSpeed||400};H[s].call(n,c,p)}}})})}},getNext:function(t){return t="number"==typeof t?t:this.getIndex(),t===this.getDataLength()-1?0:t+1},getPrev:function(t){return t="number"==typeof t?t:this.getIndex(),0===t?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return"undefined"==typeof t?this._options:this._options[t]},setOptions:function(e,i){return"object"==typeof e?t.extend(this._options,e):this._options[e]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(Galleria.PLAY),this},pause:function(){return this._playing=!1,this.trigger(Galleria.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,i=20,n=A.timestamp(),a="play"+this._id;if(this._playing){A.clearTimer(a);var o=function(){return e=A.timestamp()-n,e>=t._playtime&&t._playing?(A.clearTimer(a),t.next(),void 0):(t._playing&&(t.trigger({type:Galleria.PROGRESS,percent:Math.ceil(100*(e/t._playtime)),seconds:Math.floor(e/1e3),milliseconds:e}),A.addTimer(a,o,i)),void 0)};A.addTimer(a,o,i)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if("number"==typeof t?t++:"undefined"==typeof t&&(t=this.getIndex()+1),this.get("current").innerHTML=t,g){var e=this.$("counter"),i=e.css("opacity");1===parseInt(i,10)?A.removeAlpha(e[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(e){var i=this,n=this.getData(e);return t.each(["title","description"],function(t,e){var a=i.$("info-"+e);n[e]?a[n[e].length?"show":"hide"]().html(n[e]):a.empty().hide()}),this},hasInfo:function(t){var e,i="title description".split(" ");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(e){var i=this,n=[];t.each(e.split(","),function(e,a){a=t.trim(a),i.get(a)&&n.push(a)});var a=t(i.get(n.shift()));return t.each(n,function(t,e){a=a.add(i.get(e))}),a},$:function(){return this.jQuery.apply(this,A.array(arguments))}},t.each(b,function(t,e){var i=/_/.test(e)?e.replace(/_/g,""):e;Galleria[e.toUpperCase()]="galleria."+i}),t.extend(Galleria,{IE9:9===g,IE8:8===g,IE7:7===g,IE6:6===g,IE:g,WEBKIT:/webkit/.test(u),CHROME:/chrome/.test(u),SAFARI:/safari/.test(u)&&!/chrome/.test(u),QUIRK:g&&n.compatMode&&"BackCompat"===n.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!i.opera,IPHONE:/iphone/.test(u),IPAD:/ipad/.test(u),ANDROID:/android/.test(u),TOUCH:"ontouchstart"in n}),Galleria.addTheme=function(t){return G(t),t},Galleria.loadTheme=function(n,a){var o=$.length,r=i.setTimeout(function(){Galleria.raise("Theme at "+n+" could not load, check theme path.",!0)},5e3);return Galleria.theme=e,A.loadScript(n,function(){if(i.clearTimeout(r),o){var e=[];t.each(Galleria.get(),function(i,n){var o=t.extend(n._original.options,{data_source:n._data},a);n.$("container").remove();var r=new Galleria;r._id=n._id,r.init(n._original.target,o),e.push(r)}),$=e}}),Galleria},Galleria.get=function(t){return C[t]?C[t]:"number"!=typeof t?C:(Galleria.raise("Gallery index "+t+" not found"),void 0)},Galleria.configure=function(e,i){var n={};return"string"==typeof e&&i?(n[e]=i,e=n):t.extend(n,e),Galleria.configure.options=n,t.each(Galleria.get(),function(t,e){e.setOptions(n)}),Galleria},Galleria.configure.options={},Galleria.on=function(e,i){if(e){i=i||p;var n=e+i.toString().replace(/\s/g,"")+A.timestamp();return t.each(Galleria.get(),function(t,a){a._binds.push(n),a.bind(e,i)}),Galleria.on.binds.push({type:e,callback:i,hash:n}),Galleria}},Galleria.on.binds=[],Galleria.run=function(e,i){return t(e||"#galleria").galleria(i),Galleria},Galleria.addTransition=function(t,e){return H[t]=e,Galleria},Galleria.utils=A,Galleria.log=function(){var e=A.array(arguments);if(!("console"in i&&"log"in i.console))return i.alert(e.join("<br>"));try{return i.console.log.apply(i.console,e)}catch(n){t.each(e,function(){i.console.log(this)})}},Galleria.ready=function(e){return t.each($,function(t,i){e.call(i,i._options)}),Galleria.ready.callbacks.push(e),Galleria},Galleria.ready.callbacks=[],Galleria.raise=function(e,i){var n=i?"Fatal error":"Error",a={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},o=function(e){var o='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+'";>'+(i?"<strong>"+n+": </strong>":"")+e+"</div>";t.each(C,function(){var t=this.$("errors"),e=this.$("target");t.length||(e.css("position","relative"),t=this.addElement("errors").appendChild("target","errors").$("errors").css(a)),t.append(o)}),C.length||t("<div>").css(t.extend(a,{position:"fixed"})).append(o).appendTo(m().body)};if(l){if(o(e),i)throw new Error(n+": "+e)}else if(i){if(j)return;j=!0,i=!1,o("Gallery could not load.")}},Galleria.version=s,Galleria.requires=function(t,e){return e=e||"You need to upgrade Galleria to version "+t+" to use one or more components.",Galleria.version<t&&Galleria.raise(e,!0),Galleria},Galleria.Picture=function(e){this.id=e||null,this.image=null,this.container=A.create("galleria-image"),t(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},Galleria.Picture.prototype={cache:{},show:function(){A.show(this.image)},hide:function(){A.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(e){t(new Image).load(function(t,e){return function(){e[t]=t}}(e,this.cache)).attr("src",e)},load:function(e,n,a){if("function"==typeof n&&(a=n,n=null),this.isIframe){var o="if"+(new Date).getTime();return this.image=t("<iframe>",{src:e,frameborder:0,id:o,allowfullscreen:!0,css:{visibility:"hidden"}})[0],t(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),t("#"+o).load(function(e,n){return function(){i.setTimeout(function(){t(e.image).css("visibility","visible"),"function"==typeof n&&n.call(e,e)},10)}}(this,a)),this.container}this.image=new Image;var r=!1,s=!1,l=t(this.container),c=t(this.image),u=function(e,a,o){return function(){var r=function(){t(this).unbind("load"),e.original=n||{height:this.height,width:this.width},e.container.appendChild(this),e.cache[o]=o,"function"==typeof a&&i.setTimeout(function(){a.call(e,e)},1)};this.width&&this.height?r.call(this):i.setTimeout(function(e){return function(){e.width&&e.height?r.call(e):s?Galleria.raise("Could not extract width/height from image: "+e.src+". Traced measures: width:"+e.width+"px, height: "+e.height+"px."):(t(new Image).load(u).attr("src",e.src),s=!0)}}(this),2)}}(this,a,e);return l.find("iframe,img").remove(),c.css("display","block"),A.hide(this.image),t.each("minWidth minHeight maxWidth maxHeight".split(" "),function(t,e){c.css(e,/min/.test(e)?"0":"none")}),this.cache[e]?(c.load(u).attr("src",e),this.container):(c.load(u).error(function(){r?h?t(this).attr("src",h):Galleria.raise("Image not found: "+e):(r=!0,i.setTimeout(function(t,e){return function(){t.attr("src",e+"?"+A.timestamp())}}(t(this),e),50))}).attr("src",e),this.container)},scale:function(i){var n=this;if(i=t.extend({width:0,height:0,min:e,max:e,margin:0,complete:p,position:"center",crop:!1,canvas:!1},i),this.isIframe){t(this.image).width(i.width).height(i.height).removeAttr("width").removeAttr("height"),t(this.container).width(i.width).height(i.height),i.complete.call(n,n);try{this.image.contentWindow&&t(this.image.contentWindow).trigger("resize")}catch(a){}return this.container}if(!this.image)return this.container;var o,r,s,l=t(n.container);return A.wait({until:function(){return o=i.width||l.width()||A.parseValue(l.css("width")),r=i.height||l.height()||A.parseValue(l.css("height")),o&&r},success:function(){var e=(o-2*i.margin)/n.original.width,a=(r-2*i.margin)/n.original.height,l=Math.min(e,a),c=Math.max(e,a),h={"true":c,width:e,height:a,"false":l,landscape:n.original.width>n.original.height?c:l,portrait:n.original.width<n.original.height?c:l},u=h[i.crop.toString()],d="";i.max&&(u=Math.min(i.max,u)),i.min&&(u=Math.max(i.min,u)),t.each(["width","height"],function(e,i){t(n.image)[i](n[i]=n.image[i]=Math.round(n.original[i]*u))}),t(n.container).width(o).height(r),i.canvas&&S&&(S.elem.width=n.width,S.elem.height=n.height,d=n.image.src+":"+n.width+"x"+n.height,n.image.src=S.cache[d]||function(t){S.context.drawImage(n.image,0,0,n.original.width*u,n.original.height*u);try{return s=S.elem.toDataURL(),S.length+=s.length,S.cache[t]=s,s}catch(e){return n.image.src}}(d));var p={},f={},g=function(e,i,a){var o=0;if(/\%/.test(e)){var r=parseInt(e,10)/100,s=n.image[i]||t(n.image)[i]();o=Math.ceil(-1*s*r+a*r)}else o=A.parseValue(e);return o},m={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};t.each(i.position.toLowerCase().split(" "),function(t,e){"center"===e&&(e="50%"),p[t?"top":"left"]=e}),t.each(p,function(e,i){m.hasOwnProperty(i)&&t.extend(f,m[i])}),p=p.top?t.extend(p,f):f,p=t.extend({top:"50%",left:"50%"},p),t(n.image).css({position:"absolute",top:g(p.top,"height",r),left:g(p.left,"width",o)}),n.show(),n.ready=!0,i.complete.call(n,n)},error:function(){Galleria.raise("Could not scale image: "+n.image.src)},timeout:1e3}),this}},t.extend(t.easing,{galleria:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,n,a){return n*(e/=a)*e+i},galleriaOut:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i}}),t.fn.galleria=function(e){var i=this.selector;return t(this).length?this.each(function(){t.data(this,"galleria")||t.data(this,"galleria",(new Galleria).init(this,e))}):(t(function(){t(i).length?t(i).galleria(e):Galleria.utils.wait({until:function(){return t(i).length},success:function(){t(i).galleria(e)},error:function(){Galleria.raise('Init failed: Galleria could not find the element "'+i+'".')},timeout:5e3})}),this)}}(jQuery),/*!
 * jScrollPane - v2.0.0beta12 - 2012-06-21
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
// Copyright (c) 2012 Kelvin Luck
function(t,e,i){t.fn.jScrollPane=function(n){function a(n,a){function o(e){var a,s,c,u,d,p,m=!1,v=!1;if(O=e,B===i)d=n.scrollTop(),p=n.scrollLeft(),n.css({overflow:"hidden",padding:0}),N=n.innerWidth()+ye,F=n.innerHeight(),n.width(N),B=t('<div class="jspPane" />').css("padding",be).append(n.children()),V=t('<div class="jspContainer" />').css({width:N+"px",height:F+"px"}).append(B).appendTo(n);else{if(n.css("width",""),m=O.stickToBottom&&S(),v=O.stickToRight&&I(),u=n.innerWidth()+ye!=N||n.outerHeight()!=F,u&&(N=n.innerWidth()+ye,F=n.innerHeight(),V.css({width:N+"px",height:F+"px"})),!u&&we==Y&&B.outerHeight()==X)return n.width(N),void 0;we=Y,B.css("width",""),n.width(N),V.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}B.css("overflow","auto"),Y=e.contentWidth?e.contentWidth:B[0].scrollWidth,X=B[0].scrollHeight,B.css("overflow",""),U=Y/N,q=X/F,Q=q>1,K=U>1,K||Q?(n.addClass("jspScrollable"),a=O.maintainPosition&&(te||ne),a&&(s=C(),c=j()),r(),l(),h(),a&&(T(v?Y-N:s,!1),k(m?X-F:c,!1)),D(),G(),L(),O.enableKeyboardNavigation&&P(),O.clickOnTrack&&f(),z(),O.hijackInternalLinks&&W()):(n.removeClass("jspScrollable"),B.css({top:0,width:V.width()-ye}),A(),M(),E(),g()),O.autoReinitialise&&!ve?ve=setInterval(function(){o(O)},O.autoReinitialiseDelay):!O.autoReinitialise&&ve&&clearInterval(ve),d&&n.scrollTop(0)&&k(d,!1),p&&n.scrollLeft(0)&&T(p,!1),n.trigger("jsp-initialised",[K||Q])}function r(){Q&&(V.append(t('<div class="jspVerticalBar" />').append(t('<div class="jspCap jspCapTop" />'),t('<div class="jspTrack" />').append(t('<div class="jspDrag" />').append(t('<div class="jspDragTop" />'),t('<div class="jspDragBottom" />'))),t('<div class="jspCap jspCapBottom" />'))),ae=V.find(">.jspVerticalBar"),oe=ae.find(">.jspTrack"),J=oe.find(">.jspDrag"),O.showArrows&&(ce=t('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",d(0,-1)).bind("click.jsp",H),he=t('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",d(0,1)).bind("click.jsp",H),O.arrowScrollOnHover&&(ce.bind("mouseover.jsp",d(0,-1,ce)),he.bind("mouseover.jsp",d(0,1,he))),u(oe,O.verticalArrowPositions,ce,he)),se=F,V.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){se-=t(this).outerHeight()}),J.hover(function(){J.addClass("jspHover")},function(){J.removeClass("jspHover")}).bind("mousedown.jsp",function(e){t("html").bind("dragstart.jsp selectstart.jsp",H),J.addClass("jspActive");var i=e.pageY-J.position().top;return t("html").bind("mousemove.jsp",function(t){v(t.pageY-i,!1)}).bind("mouseup.jsp mouseleave.jsp",m),!1}),s())}function s(){oe.height(se+"px"),te=0,re=O.verticalGutter+oe.outerWidth(),B.width(N-re-ye);try{0===ae.position().left&&B.css("margin-left",re+"px")}catch(t){}}function l(){K&&(V.append(t('<div class="jspHorizontalBar" />').append(t('<div class="jspCap jspCapLeft" />'),t('<div class="jspTrack" />').append(t('<div class="jspDrag" />').append(t('<div class="jspDragLeft" />'),t('<div class="jspDragRight" />'))),t('<div class="jspCap jspCapRight" />'))),ue=V.find(">.jspHorizontalBar"),de=ue.find(">.jspTrack"),ee=de.find(">.jspDrag"),O.showArrows&&(ge=t('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",d(-1,0)).bind("click.jsp",H),me=t('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",d(1,0)).bind("click.jsp",H),O.arrowScrollOnHover&&(ge.bind("mouseover.jsp",d(-1,0,ge)),me.bind("mouseover.jsp",d(1,0,me))),u(de,O.horizontalArrowPositions,ge,me)),ee.hover(function(){ee.addClass("jspHover")},function(){ee.removeClass("jspHover")}).bind("mousedown.jsp",function(e){t("html").bind("dragstart.jsp selectstart.jsp",H),ee.addClass("jspActive");var i=e.pageX-ee.position().left;return t("html").bind("mousemove.jsp",function(t){y(t.pageX-i,!1)}).bind("mouseup.jsp mouseleave.jsp",m),!1}),pe=V.innerWidth(),c())}function c(){V.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){pe-=t(this).outerWidth()}),de.width(pe+"px"),ne=0}function h(){if(K&&Q){var e=de.outerHeight(),i=oe.outerWidth();se-=e,t(ue).find(">.jspCap:visible,>.jspArrow").each(function(){pe+=t(this).outerWidth()}),pe-=i,F-=i,N-=e,de.parent().append(t('<div class="jspCorner" />').css("width",e+"px")),s(),c()}K&&B.width(V.outerWidth()-ye+"px"),X=B.outerHeight(),q=X/F,K&&(fe=Math.ceil(1/U*pe),fe>O.horizontalDragMaxWidth?fe=O.horizontalDragMaxWidth:fe<O.horizontalDragMinWidth&&(fe=O.horizontalDragMinWidth),ee.width(fe+"px"),ie=pe-fe,w(ne)),Q&&(le=Math.ceil(1/q*se),le>O.verticalDragMaxHeight?le=O.verticalDragMaxHeight:le<O.verticalDragMinHeight&&(le=O.verticalDragMinHeight),J.height(le+"px"),Z=se-le,b(te))}function u(t,e,i,n){var a,o="before",r="after";"os"==e&&(e=/Mac/.test(navigator.platform)?"after":"split"),e==o?r=e:e==r&&(o=e,a=i,i=n,n=a),t[o](i)[r](n)}function d(t,e,i){return function(){return p(t,e,this,i),this.blur(),!1}}function p(e,i,n,a){n=t(n).addClass("jspActive");var o,r,s=!0,l=function(){0!==e&&_e.scrollByX(e*O.arrowButtonSpeed),0!==i&&_e.scrollByY(i*O.arrowButtonSpeed),r=setTimeout(l,s?O.initialDelay:O.arrowRepeatFreq),s=!1};l(),o=a?"mouseout.jsp":"mouseup.jsp",a=a||t("html"),a.bind(o,function(){n.removeClass("jspActive"),r&&clearTimeout(r),r=null,a.unbind(o)})}function f(){g(),Q&&oe.bind("mousedown.jsp",function(e){if(e.originalTarget===i||e.originalTarget==e.currentTarget){var n,a=t(this),o=a.offset(),r=e.pageY-o.top-te,s=!0,l=function(){var t=a.offset(),i=e.pageY-t.top-le/2,o=F*O.scrollPagePercent,h=Z*o/(X-F);if(0>r)te-h>i?_e.scrollByY(-o):v(i);else{if(!(r>0))return c(),void 0;i>te+h?_e.scrollByY(o):v(i)}n=setTimeout(l,s?O.initialDelay:O.trackClickRepeatFreq),s=!1},c=function(){n&&clearTimeout(n),n=null,t(document).unbind("mouseup.jsp",c)};return l(),t(document).bind("mouseup.jsp",c),!1}}),K&&de.bind("mousedown.jsp",function(e){if(e.originalTarget===i||e.originalTarget==e.currentTarget){var n,a=t(this),o=a.offset(),r=e.pageX-o.left-ne,s=!0,l=function(){var t=a.offset(),i=e.pageX-t.left-fe/2,o=N*O.scrollPagePercent,h=ie*o/(Y-N);if(0>r)ne-h>i?_e.scrollByX(-o):y(i);else{if(!(r>0))return c(),void 0;i>ne+h?_e.scrollByX(o):y(i)}n=setTimeout(l,s?O.initialDelay:O.trackClickRepeatFreq),s=!1},c=function(){n&&clearTimeout(n),n=null,t(document).unbind("mouseup.jsp",c)};return l(),t(document).bind("mouseup.jsp",c),!1}})}function g(){de&&de.unbind("mousedown.jsp"),oe&&oe.unbind("mousedown.jsp")}function m(){t("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),J&&J.removeClass("jspActive"),ee&&ee.removeClass("jspActive")}function v(t,e){Q&&(0>t?t=0:t>Z&&(t=Z),e===i&&(e=O.animateScroll),e?_e.animate(J,"top",t,b):(J.css("top",t),b(t)))}function b(t){if(!Q)return!1;t===i&&(t=J.position().top),V.scrollTop(0),te=t;var e=0===te,a=te==Z,o=t/Z,r=-o*(X-F);(xe!=e||Te!=a)&&(xe=e,Te=a,n.trigger("jsp-arrow-change",[xe,Te,ke,$e])),_(e,a),B.css("top",r),n.trigger("jsp-scroll-y",[-r,e,a]).trigger("scroll")}function y(t,e){K&&(0>t?t=0:t>ie&&(t=ie),e===i&&(e=O.animateScroll),e?_e.animate(ee,"left",t,w):(ee.css("left",t),w(t)))}function w(t){t===i&&(t=ee.position().left),V.scrollTop(0),ne=t;var e=0===ne,a=ne==ie,o=t/ie,r=-o*(Y-N);(ke!=e||$e!=a)&&(ke=e,$e=a,n.trigger("jsp-arrow-change",[xe,Te,ke,$e])),x(e,a),B.css("left",r),n.trigger("jsp-scroll-x",[-r,e,a]).trigger("scroll")}function _(t,e){O.showArrows&&(ce[t?"addClass":"removeClass"]("jspDisabled"),he[e?"addClass":"removeClass"]("jspDisabled"))}function x(t,e){O.showArrows&&(ge[t?"addClass":"removeClass"]("jspDisabled"),me[e?"addClass":"removeClass"]("jspDisabled"))}function k(t,e){var i=t/(X-F);v(i*Z,e)}function T(t,e){var i=t/(Y-N);y(i*ie,e)}function $(e,i,n){var a,o,r,s,l,c,h,u,d,p=0,f=0;try{a=t(e)}catch(g){return}for(o=a.outerHeight(),r=a.outerWidth(),V.scrollTop(0),V.scrollLeft(0);!a.is(".jspPane");)if(p+=a.position().top,f+=a.position().left,a=a.offsetParent(),/^body|html$/i.test(a[0].nodeName))return;s=j(),c=s+F,s>p||i?u=p-O.verticalGutter:p+o>c&&(u=p-F+o+O.verticalGutter),u&&k(u,n),l=C(),h=l+N,l>f||i?d=f-O.horizontalGutter:f+r>h&&(d=f-N+r+O.horizontalGutter),d&&T(d,n)}function C(){return-B.position().left}function j(){return-B.position().top}function S(){var t=X-F;return t>20&&t-j()<10}function I(){var t=Y-N;return t>20&&t-C()<10}function G(){V.unbind(je).bind(je,function(t,e,i,n){var a=ne,o=te;return _e.scrollBy(i*O.mouseWheelSpeed,-n*O.mouseWheelSpeed,!1),a==ne&&o==te})}function A(){V.unbind(je)}function H(){return!1}function D(){B.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(t){$(t.target,!1)})}function M(){B.find(":input,a").unbind("focus.jsp")}function P(){function e(){var t=ne,e=te;switch(i){case 40:_e.scrollByY(O.keyboardSpeed,!1);break;case 38:_e.scrollByY(-O.keyboardSpeed,!1);break;case 34:case 32:_e.scrollByY(F*O.scrollPagePercent,!1);break;case 33:_e.scrollByY(-F*O.scrollPagePercent,!1);break;case 39:_e.scrollByX(O.keyboardSpeed,!1);break;case 37:_e.scrollByX(-O.keyboardSpeed,!1)}return a=t!=ne||e!=te}var i,a,o=[];K&&o.push(ue[0]),Q&&o.push(ae[0]),B.focus(function(){n.focus()}),n.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(n){if(n.target===this||o.length&&t(n.target).closest(o).length){var r=ne,s=te;switch(n.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:i=n.keyCode,e();break;case 35:k(X-F),i=null;break;case 36:k(0),i=null}return a=n.keyCode==i&&r!=ne||s!=te,!a}}).bind("keypress.jsp",function(t){return t.keyCode==i&&e(),!a}),O.hideFocus?(n.css("outline","none"),"hideFocus"in V[0]&&n.attr("hideFocus",!0)):(n.css("outline",""),"hideFocus"in V[0]&&n.attr("hideFocus",!1))}function E(){n.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function z(){if(location.hash&&location.hash.length>1){var e,i,n=escape(location.hash.substr(1));try{e=t("#"+n+', a[name="'+n+'"]')}catch(a){return}e.length&&B.find(n)&&(0===V.scrollTop()?i=setInterval(function(){V.scrollTop()>0&&($(e,!0),t(document).scrollTop(V.position().top),clearInterval(i))},50):($(e,!0),t(document).scrollTop(V.position().top)))}}function W(){t(document.body).data("jspHijack")||(t(document.body).data("jspHijack",!0),t(document.body).delegate("a[href*=#]","click",function(i){var n,a,o,r,s,l,c=this.href.substr(0,this.href.indexOf("#")),h=location.href;if(-1!==location.href.indexOf("#")&&(h=location.href.substr(0,location.href.indexOf("#"))),c===h){n=escape(this.href.substr(this.href.indexOf("#")+1));try{a=t("#"+n+', a[name="'+n+'"]')}catch(u){return}a.length&&(o=a.closest(".jspScrollable"),r=o.data("jsp"),r.scrollToElement(a,!0),o[0].scrollIntoView&&(s=t(e).scrollTop(),l=a.offset().top,(s>l||l>s+t(e).height())&&o[0].scrollIntoView()),i.preventDefault())}}))}function L(){var t,e,i,n,a,o=!1;V.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var s=r.originalEvent.touches[0];t=C(),e=j(),i=s.pageX,n=s.pageY,a=!1,o=!0}).bind("touchmove.jsp",function(r){if(o){var s=r.originalEvent.touches[0],l=ne,c=te;return _e.scrollTo(t+i-s.pageX,e+n-s.pageY),a=a||Math.abs(i-s.pageX)>5||Math.abs(n-s.pageY)>5,l==ne&&c==te}}).bind("touchend.jsp",function(){o=!1}).bind("click.jsp-touchclick",function(){return a?(a=!1,!1):void 0})}function R(){var t=j(),e=C();n.removeClass("jspScrollable").unbind(".jsp"),n.replaceWith(Ce.append(B.children())),Ce.scrollTop(t),Ce.scrollLeft(e),ve&&clearInterval(ve)}var O,B,N,F,V,Y,X,U,q,Q,K,J,Z,te,ee,ie,ne,ae,oe,re,se,le,ce,he,ue,de,pe,fe,ge,me,ve,be,ye,we,_e=this,xe=!0,ke=!0,Te=!1,$e=!1,Ce=n.clone(!1,!1).empty(),je=t.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";be=n.css("paddingTop")+" "+n.css("paddingRight")+" "+n.css("paddingBottom")+" "+n.css("paddingLeft"),ye=(parseInt(n.css("paddingLeft"),10)||0)+(parseInt(n.css("paddingRight"),10)||0),t.extend(_e,{enable:function(t){Q=t},reinitialise:function(e){e=t.extend({},O,e),o(e)},scrollToElement:function(t,e,i){$(t,e,i)},scrollTo:function(t,e,i){T(t,i),k(e,i)},scrollToX:function(t,e){T(t,e)},scrollToY:function(t,e){k(t,e)},scrollToPercentX:function(t,e){T(t*(Y-N),e)},scrollToPercentY:function(t,e){k(t*(X-F),e)},scrollBy:function(t,e,i){_e.scrollByX(t,i),_e.scrollByY(e,i)},scrollByX:function(t,e){var i=C()+Math[0>t?"floor":"ceil"](t),n=i/(Y-N);y(n*ie,e)},scrollByY:function(t,e){var i=j()+Math[0>t?"floor":"ceil"](t),n=i/(X-F);v(n*Z,e)},positionDragX:function(t,e){y(t,e)},positionDragY:function(t,e){v(t,e)},animate:function(t,e,i,a){var o={};o[e]=i,t.animate(o,{duration:O.animateDuration,easing:O.animateEase,queue:!1,step:a,complete:function(){n.trigger("complete")}})},getContentPositionX:function(){return C()},getContentPositionY:function(){return j()},getContentWidth:function(){return Y},getContentHeight:function(){return X},getPercentScrolledX:function(){return C()/(Y-N)},getPercentScrolledY:function(){return j()/(X-F)},getIsScrollableH:function(){return K},getIsScrollableV:function(){return Q},getContentPane:function(){return B},scrollToBottom:function(t){v(Z,t)},hijackInternalLinks:t.noop,destroy:function(){R()}}),o(a)}return n=t.extend({},t.fn.jScrollPane.defaults,n),t.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var e=t(this),i=e.data("jsp");i?i.reinitialise(n):(t("script",e).filter('[type="text/javascript"],:not([type])').remove(),i=new a(e,n),e.data("jsp",i))})},t.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:i,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(t,e,i){"use strict";t.fn.backstretch=function(n,o){return(n===i||0===n.length)&&t.error("No images were supplied for Backstretch"),0===t(e).scrollTop()&&e.scrollTo(0,0),this.each(function(){var e=t(this),i=e.data("backstretch");i&&(o=t.extend(i.options,o),i.destroy(!0)),i=new a(this,n,o),e.data("backstretch",i)})},t.backstretch=function(e,i){return t("body").backstretch(e,i).data("backstretch")},t.expr[":"].backstretch=function(e){return t(e).data("backstretch")!==i},t.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var n={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxWidth:"none",zIndex:-999999}},a=function(i,a,r){if(this.options=t.extend({},t.fn.backstretch.defaults,r||{}),this.images=t.isArray(a)?a:[a],t.each(this.images,function(){t("<img />")[0].src=this}),this.isBody=i===document.body,this.$container=t(i),this.$wrap=t('<div class="backstretch"></div>').css(n.wrap).appendTo(this.$container),this.$root=this.isBody?o?t(e):t(document):this.$container,!this.isBody){var s=this.$container.css("position"),l=this.$container.css("zIndex");this.$container.css({position:"static"===s?"relative":s,zIndex:"auto"===l?0:l,background:"none"}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&o?"fixed":"absolute"}),this.index=0,this.show(this.index),t(e).on("resize.backstretch",t.proxy(this.resize,this)).on("orientationchange.backstretch",t.proxy(function(){this.isBody&&0===e.pageYOffset&&(e.scrollTo(0,1),this.resize())},this))};a.prototype={resize:function(){try{var t,i={left:0,top:0},n=this.isBody?this.$root.width():this.$root.innerWidth(),a=n,o=this.isBody?e.innerHeight?e.innerHeight:this.$root.height():this.$root.innerHeight(),r=a/this.$img.data("ratio");r>=o?(t=(r-o)/2,this.options.centeredY&&(i.top="-"+t+"px")):(r=o,a=r*this.$img.data("ratio"),t=(a-n)/2,this.options.centeredX&&(i.left="-"+t+"px")),this.$wrap.css({width:n,height:o}).find("img:not(.deleteable)").css({width:a,height:r}).css(i)}catch(s){}return this},show:function(e){if(!(Math.abs(e)>this.images.length-1)){this.index=e;var i=this,a=i.$wrap.find("img").addClass("deleteable"),o=t.Event("backstretch.show",{relatedTarget:i.$container[0]});return clearInterval(i.interval),i.$img=t("<img />").css(n.img).bind("load",function(e){var n=this.width||t(e.target).width(),r=this.height||t(e.target).height();t(this).data("ratio",n/r),i.resize(),t(this).fadeIn(i.options.speed||i.options.fade,function(){a.remove(),i.paused||i.cycle(),i.$container.trigger(o)})}).appendTo(i.$wrap),i.$img.attr("src",i.images[e]),i}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return this.images.length>1&&(clearInterval(this.interval),this.interval=setInterval(t.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(i){t(e).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),i||this.$wrap.remove(),this.$container.removeData("backstretch")}};var o=function(){var t=navigator.userAgent,i=navigator.platform,n=t.match(/AppleWebKit\/([0-9]+)/),a=!!n&&n[1],o=t.match(/Fennec\/([0-9]+)/),r=!!o&&o[1],s=t.match(/Opera Mobi\/([0-9]+)/),l=!!s&&s[1],c=t.match(/MSIE ([0-9]+)/),h=!!c&&c[1];return!((i.indexOf("iPhone")>-1||i.indexOf("iPad")>-1||i.indexOf("iPod")>-1)&&a&&534>a||e.operamini&&"[object OperaMini]"==={}.toString.call(e.operamini)||s&&7458>l||t.indexOf("Android")>-1&&a&&533>a||r&&6>r||"palmGetResource"in e&&a&&534>a||t.indexOf("MeeGo")>-1&&t.indexOf("NokiaBrowser/8.5.0")>-1||h&&6>=h)}()}(jQuery,window),jQuery.fn.reverse=Array.prototype.reverse;var $container,$cover,$logo,$locales,$navbar,$activeSection,imagesCount=0,gridColCount=3,gridRowCount=2,gridItemHeight=300,headerHeight,footerHeight,deltaHeight,availableHeight,availableWidth,isAppleDevice,$notice,$facebook,$viewCartMenuLink,History=window.History,Home={init:function(){$container=$("#content"),$cover=$("#cover"),$locales=$("#locales"),$logo=$("#logo"),$navbar=$(".navbar:first"),$facebook=$("a#facebook"),headerHeight=$(".navbar:first").height(),footerHeight=$("#footer-container").height(),deltaHeight=headerHeight+footerHeight,$viewCartMenuLink=$("a#view-cart-menu-link"),navigator.userAgent.toLowerCase(),isAppleDevice=$body.hasClass("mobile-device")||$body.hasClass("tablet-device"),isAppleDevice&&$("section.background-image").css("background-attachment","absolute"),$("section.background-image").each(function(t,e){imagesCount++;var i=$(e).data("bg");$("<img>").attr("src",i).on("load",function(){imagesCount--,isAppleDevice?$(e).backstretch($(this).attr("src")):$(e).css("background-image","url("+i+")"),Home.onImageLoaded()})})},onImageLoaded:function(){if(0==imagesCount){Home.resize(),Home.attachEvents(),$sidescroll.init(),$container.css({width:"100%",height:availableHeight});var t=$cover.find(".headline");t.css("opacity",0),$logo.css("opacity",0),$facebook.css("top",-50),$navbar.css("top",-50),$overlay.fadeOut(3e3,function(){$overlay.remove(),$logo.animate({opacity:1},1200,function(){t.css({opacity:1,textShadow:"#ffffff 10 10 600"}).animate({textShadow:"0 0 50 #ffffff"},1e3),$locales.show()}),$navbar.animate({top:0},200,function(){$("#scrollme").show(),Home.animateScrollme()})})}},animateScrollme:function(){for(var t=1;10>=t;t++)$("#scrollme").slideUp(2200).delay(300).slideDown(1600)},attachEvents:function(){$(window).on("debouncedresize",function(){Home.resize()}),$(".category-title a").on("click",function(t){t.stopPropagation(),t.preventDefault(),Grid.show($(this).parents("section:first"),$($(this).attr("href")))}),$("a#treasures").on("click",function(t){t.stopPropagation(),t.preventDefault(),Category.show($("section#treasures"))}),$("a#pearls").on("click",function(t){t.stopPropagation(),t.preventDefault(),Category.show($("section#pearls"))}),$(".products").on("click","a.back",function(t){t.stopPropagation(),t.preventDefault(),Grid.hide($(this).parents("section:first"))}),$(".product").on("click","a.back",function(t){t.stopPropagation(),t.preventDefault(),Product.hide($(this).parents("section:first"),$($(this).attr("href")))}).on("ajax:beforeSend","form.cart-form",function(){}).on("ajax:complete",function(){Home.showCartUpdateNotice()}),$(".tj_gallery_inner").hover(function(){$(".tj_content",this).slideToggle()},function(){$(".tj_content"),$(".tj_content",this).slideToggle()}).on("ajax:beforeSend",function(){}).on("ajax:complete",function(evt,xhr,status){Product.show($(this).parents("section:first"),$(this).parents(".products:first"),eval(xhr.responseText).html())})},resize:function(){Util.availableSpace(),$(".fullscreen").css({height:availableHeight,width:availableWidth}),$.each($(".parallax .headline"),function(){var t=$(this),e=(availableHeight-t.height())/2;e=0>e?0:e,t.css("margin-top",e)}),$logo.css("margin-top",(availableHeight-$logo.height())/2),$locales.css("top",(availableHeight-$locales.height())/2),$locales.css("left",(availableWidth+$logo.width())/2),$facebook.css({top:headerHeight}),$(".products").each(function(t,e){Grid.resize($(e))}),$("article.product").each(function(t,e){Product.resize($(e))}),$activeSection&&Home.scrollToSection($activeSection)},scrollToSection:function(t){$("html, body").animate({scrollTop:t.position().top},500)},showCartUpdateNotice:function(){var t=$viewCartMenuLink.position();void 0===$notice&&($notice=$("<div class='notice'>Your selection has been updated !</div>").appendTo($body),$notice.css({display:"none",position:"fixed","z-index":1e4,left:t.left,top:t.top+50,"background-color":"green",color:"white",padding:8})),$notice.fadeIn("slow",function(){window.setTimeout(Home.hideCartUpdateNotice,2e3)})},hideCartUpdateNotice:function(){$notice.fadeOut("slow")},onHashChange:function(){location.hash}},Product={show:function(t,e,i){var n=e,a=t.find(".product:first"),o=a.find(".content:first");t.data("state","product"),a.find("a.back:first").attr("href","#"+n.attr("id")),o.html(i);var r=o.find("article:first"),s=r.find(".product-info:first"),l=r.find(".carousel:first");Product.size(r),$("form.cart-form").attr("data-remote","true"),n.animate({left:-availableWidth},900,function(){$(this).removeClass("active")}),a.css("left",availableWidth).addClass("active").animate({left:0},900,function(){Product.initCarousel(l),s.jScrollPane()})},hide:function(t,e){var i=e,n=t.find(".product:first");t.data("state","grid"),i.addClass("active").stop().animate({left:0},900),n.stop().animate({left:availableWidth},900,function(){$(this).removeClass("active")})},size:function(t){var e=t.find(".carousel:first"),i=t.find(".product-info:first"),n=300,a=30,o=t.outerWidth(),r=availableHeight-120,s=o-n-a,l=Math.min(s,r);maxInfoWidth=o-l-a,e.css({"max-height":l,"max-width":l}),i.css({height:r,width:maxInfoWidth})},resize:function(t){var e=t.find(".product-info:first");Product.size(t),e.data("jsp").reinitialise()},initCarousel:function(t){"undefined"!=typeof t&&(t.find(".item").length>1?t.carousel("pause"):t.find(".carousel-control").each(function(){$(this).css({display:"none"})}))}},Grid={init:function(t){var e=t.find(".tj_container"),i=e.find(".tj_gallery"),n=e.find(".tj_nav"),a=n.find(".tj_prev"),o=n.find(".tj_next");i.data("anim",!1),Grid.scale(t),a.length&&a.on("click",function(t){return t.stopPropagation(),t.preventDefault(),i.data("anim")?!1:(i.data("anim",!0),Grid.paginate(i,-1),!1)}),o.length&&o.on("click",function(t){return t.stopPropagation(),t.preventDefault(),i.data("anim")?!1:(i.data("anim",!0),Grid.paginate(i,1),!1)}),t.data("initialized",!0)},scale:function(t){var e=t.find(".tj_container"),n=e.find(".tj_gallery"),a=e.find(".tj_nav"),o=a.find(".tj_nav_container"),r=n.children("li");numItems=r.length,itemPadding=8,maxItemWidth=286,minItemWidth=180,h=availableHeight-60,w=availableWidth-80,itemWidth=Math.min(maxItemWidth,Math.floor(w/4-3*itemPadding)),itemWidth=Math.max(minItemWidth,itemWidth),numVisibleRows=Math.floor(h/itemWidth),1===numVisibleRows&&(itemWidth=Math.max(Math.min(h/2,maxItemWidth),minItemWidth),numVisibleRows=Math.floor(h/itemWidth)),numCols=Math.floor(availableWidth/itemWidth),numVisibleItems=numCols*numVisibleRows,numRows=Math.ceil(numItems/numCols),numPages=Math.ceil(numRows/numVisibleRows),e.hide();var s={};s.currentRow=1,s.numVisibleRows=numVisibleRows,s.numRows=numRows,s.numCols=numCols,s.numVisibleItems=numVisibleItems,n.data("config",s);var l=itemWidth>200?"block":"none";r.each(function(t){var e,i=$(this),n=Math.ceil((t+1)/numCols),a=n%numVisibleRows;e=1===a?"0px":0===a?(numVisibleRows-1)*itemWidth+"px":(a-1)*itemWidth+"px",i.css({height:itemWidth,width:itemWidth,position:"absolute",left:itemWidth*Math.floor(t%numCols),top:e,display:t>numVisibleItems-1?"none":"block"}).attr("class",function(t,e){return e?e.replace(/\btj_row_\S+/g,""):void 0}).addClass("tj_row_"+Math.ceil((t+1)/numCols)).find(".tj_content").css("display","none").find(".description").css("display",l)});var c=h-itemWidth*numVisibleRows,u=w-itemWidth*numCols;if(n.parent().css({paddingTop:Math.floor(c/2),paddingBottom:Math.floor(c/2),paddingLeft:Math.floor(u/2),paddingRight:Math.floor(u/2)}),o.html(""),numPages>1){for(i=0;numPages>i;i++)$("<a id='row_"+(i*numVisibleRows+1)+"' class='tj_page_nav' href='#'>&#8226;</a>").appendTo(o).on("click",function(t){if(t.stopPropagation(),t.preventDefault(),n.data("anim"))return!1;n.data("anim",!0),$(this).parent().find(".active").removeClass("active"),$(this).addClass("active");var e=$(this).attr("id").replace(/[^\d]+/g,"");return Grid.paginate(n,n.data("config").currentRow>e?-1:1,e),!1});$("a#row_1").addClass("active"),a.show()}else a.hide();e.show()},show:function(t,e){$activeSection=t,Home.scrollToSection(t);var i=$activeSection.find(".category:first"),n=e;$activeSection.data("state","grid"),n.css("left",availableWidth).addClass("active"),n.data("initialized")||Grid.init(n),$body.addClass("noscroll"),i.stop().animate({left:-availableWidth},900,function(){$(this).removeClass("active")}),n.stop().animate({left:0},900)},hide:function(t){var e=t.find(".category:first"),i=t.find(".products.active:first");t.attr("data-state","category"),e.addClass("active").stop().animate({left:0},900),i.stop().animate({left:availableWidth},900,function(){$body.removeClass("noscroll"),$(this).removeClass("active")})},resize:function(t){Grid.scale(t)},paginate:function(t,e,i){var n=t.data("config");if(void 0!=i&&n.currentRow==i)return t.data("anim",!1),!1;if(1===e&&n.currentRow+n.numVisibleRows>n.numRows||-1===e&&n.currentRow-n.numVisibleRows<=0)return t.data("anim",!1),!1;if(void 0!=i);else{var a=t.parent().parent().find(".tj_page_nav.active");a.length>0&&(a.removeClass("active"),1===e?a.next().addClass("active"):a.prev().addClass("active"))}for(var o="",r="",s=0;s<n.numVisibleRows;++s)o+=".tj_row_"+(n.currentRow+s)+",",void 0!=i?(e=i>n.currentRow?1:-1,r+=".tj_row_"+(Number(i)+s)+","):r+=1===e?".tj_row_"+(n.currentRow+n.numVisibleRows+s)+",":".tj_row_"+(n.currentRow-1-s)+",";var l,c=50;l=1===e?t.children(o):t.children(o).reverse(),l.each(function(t){var e=$(this);setTimeout(function(){e.fadeOut(500,"swing")},c+t*c)});var h;h=1===e?t.children(r):t.children(r).reverse();var u=h.length,d=0;h.each(function(e){var i=$(this);setTimeout(function(){i.fadeIn(500,"swing",function(){++d,d===u&&t.data("anim",!1)})},2*c+e*c)}),void 0!=i?n.currentRow=1===e?Number(i):Number(i):1===e?n.currentRow+=n.numVisibleRows:n.currentRow-=n.numVisibleRows,t.data("config",n)}},Category={init:function(){},show:function(t){if(void 0==$activeSection)Home.scrollToSection(t);else{var e=($activeSection.attr("id"),t.attr("id"),$activeSection.data("state"));if("category"==e)Home.scrollToSection(t,null);else if("product"==e){var i=$activeSection.find(".category:first"),n=$activeSection.find(".product.active:first"),a=$activeSection.find(n.find("a.back:first").attr("href"));n.stop().animate({left:availableWidth},900,function(){$(this).removeClass("active")}),a.addClass("active").stop().animate({left:availableWidth},1800,function(){$(this).removeClass("active")}),i.addClass("active").stop().animate({left:0},2700,function(){$body.removeClass("noscroll"),Home.scrollToSection(t,!1)})}else if("grid"==e){var o=$activeSection.find(".products.active:first"),i=$activeSection.find(".category:first");o.stop().animate({left:availableWidth},900,function(){$(this).removeClass("active")}),i.addClass("active").stop().animate({left:0},1800,function(){$body.removeClass("noscroll"),Home.scrollToSection(t,!1)})}}t.data("state","category"),$activeSection=t},hide:function(){},resize:function(){}};